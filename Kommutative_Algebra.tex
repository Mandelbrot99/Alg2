\newpage
\section{Kommutative Algebra}
\begin{center}
	\textbf{In diesem Kapitel sei $A$ stets ein kommutativer Ring (mit Eins)}
\end{center}
\setcounter{subsection}{10}
\subsection{Grundlagen}
\begin{df}\label{11.1}
	$A$ heißt \define{lokal\index{lokal}} $\defi A$ besitzt genau ein maximales Ideal $\mathfrak{m}$. In diesem Fall heißt $k= \QR{A}{\mathfrak{m}}$ der \define{Restklassenkörper\index{Restklassenkörper}} von $A$.
\end{df}
\begin{bem}\label{11.2}
	Sei $\mathfrak{m}\subseteq A$ ein maximales Ideal. Dann sind äquivalent:
	\begin{enumerate}[label= \roman*)]
		\item $A$ ist lokal mit einem maximalen Ideal $\mathfrak{m}$
		\item $A\backslash \m \subseteq A^*$
		\item $A \backslash \m = A^*$
		\item $1+ \m \subseteq A^*$
	\end{enumerate}
\end{bem}
\begin{proof}
	$i) \Ra ii)$ Sei $x\in A\backslash \m$. Falls $x\notin A^*$, dann existiert nach Algebra 1 ein maximales Ideal $\tilde{\m} \subseteq A$ mit $x\in \m$. Insbesondere ist $\tilde{\m} \neq \m$, d.h. $A$ ist nicht lokal.\\
	$ii) \Ra i)$ Es gelte $A\backslash \m \subseteq A^*$. Sei $\a\subsetneq A$ ein Ideal. Dann ist $\a \cap A^*= \emptyset$, also $\a \cap (A\backslash \m) = \emptyset$. Damit ist $\a \subseteq \m$. Somit ist $\m$ das einzige maximale Ideal in $A$.\\
	$ii) \Ra iii)$ klar: $x\in A^* \Ra x\in A \backslash \m$.\\
	$iii) \Ra iv)$ Sei $x\in 1+ \m$. Falls $x\in \m$, dann ist $1\in \m$, Widerspruch! Also $x\in A \backslash \m \overset{iii)}{=} A^*$.\\
	$iv) \Ra ii)$ Es gelte $1+ \m \subseteq A^*$. Sei $x\in A \backslash m$. Dann ist $Ax+ \m$ ein Ideal mit $Ax+ \m \supsetneq \m$, also $Ax+ \m =(1)$. Damit existiert ein $a\in A, \, y\in \m$ mit $ax+y =1$, also $ax=1-y\in 1+ \m \subseteq A^* \Ra x\in A^*$.
\end{proof}
\begin{df}\label{11.3}
	Sei $x\in A$. $x$ heißt \define{nilpotent\index{nilpotentes Element}} $\defi$ Es existiert ein $n\in \N$ mit $x^n=0$.
\end{df}
\begin{anm}
	Ist $A\neq 0$, dann ist jedes nilpotentes Element ein Nullteiler, die Umkehrung ist im Allgemeinen jedoch falsch.
\end{anm}
\begin{bem+df}
	$$\NN(A) := \{x\in A|\, x\text{ ist nilpotent}\}$$
	ist ein Ideal in $A$, das \define{Nilradikal\index{Nilradikal}} in $A$. Der Ring $\QR{A}{\NN(A)}$ hat keine nilpotenten Elemente $\neq 0$.
\end{bem+df}
\begin{proof}
	\begin{enumerate}
		\item $\NN(A)$ ist ein Ideal:
		\begin{itemize}
			\item $0\in \NN(A)$
			\item Seien $x,y\in \NN(A)$. Dann existiert ein $n\in \N$ mit $x^n=0$ und $y^n=0$, womit $(x+y)^{2n-1} =0$ (aus der binomischen Formel) folgt. Damit ist $x+y \in \NN(A)$.
			\item Sei $x\in \NN(A)\, a\in A$. Dann existiert ein $n\in \N$ mit $x^n=0$, also $a^nx^n = (ax)^n=0$, womit $ax \in \NN(A)$ gilt.
		\end{itemize}
	\item Sei $\bar x \in \QR{A}{\NN(A)}$ nilpotent. Dann existiert ein $n\in \N$ mit $\bar x^n=0$, also $x^n \in \NN(A)$, also existiert ein $m\in \N$ mit $(x^n)^m=0$, also $x^{nm} = 0$, woraus $x\in \NN(A)$, also $\bar x=0$ folgt.
	\end{enumerate}
Damit folgt die Aussage
\end{proof}
\begin{sa}\label{11.5}
	Es gilt
	$$\NN(A) = \bigcap_{\p \subseteq A\atop \text{Primideal}} \p$$
\end{sa}
\begin{proof}
	Wir setzen $\NN'(A)= \bigcap\limits_{\p \subseteq A\atop \text{Primideal}} \p$. Zeige, dass $\NN(A) = \NN'(A)$.\\
	"'$\subseteq$"' Sei $x\in \NN(A)$. Dann existiert ein $n\in \N$ mit $x^n=0$. Für jedes Primideal $\p\subseteq A$ ist dann $x^n\in \p$, also $x\in \p$. Damit ist auch $x\in \NN'(A)$.\\
	"'$\supseteq$"' Angenommen es existiert ein $x\in \NN'(A) \backslash \NN(A)$. Dann gilt $x^n\neq 0$ für alle $n\in \N$. Setze
	$$\Sigma:= \{\a\in A \text{ Ideal}|\, x^n\notin \a \text{ für alle }n\in \N\}$$
	Dann ist $\Sigma$ eine bezüglich Inklusion induktiv geordnete Menge $\neq \emptyset$ (Standardargument mit $\cup$). Nach dem Zornschen Lemma existiert ein maximales Element $\p$ in $\Sigma$. Diese $\p$ ist ein Primideal, denn: Seien $s,t\notin \p$. Dann ist $\p \subsetneq As+ \p$ und $\p\subsetneq At+\p$. Also ist $as+ \p, \, At + \p \notin\Sigma$. Damit existieren $m,n\in \N$ mit $x^n\in As+\p, \, x^m \in At+ \p$. Also liegt $x^{n+m} \in Ast+ \p$, weshalb $Ast + \p \notin\Sigma$. Falls $st \in \p$, dann wäre $Ast + \p = \p \in \Sigma$, Widersprch! Also ist $st \notin \p$, also ist $\p$ ein Primideal. Wegen $\p \in \Sigma$ folgt $x\notin \p$, also $x\notin \NN'(A)$. Widerpsruch!
\end{proof}
\begin{bem} \label{11.6}
	Seien $ \p_1, \dots \p_n $ Primideale in A, $\a \subseteq A $ Ideal mit $\a \subseteq \bigcup_{i = 0}^{n} \p_i$. Dann existiert ein $j \in \{1,\dots,n \} $ mit $ \a \subseteq \p_j$.
\end{bem}
\begin{proof}
	per Induktion nach n: $ \a \not \subseteq \p_i $ für $ i = 1,...,n  \Ra \a \not \subseteq \bigcup_{i = 0}^{n} \p_i $. \\
	n=1: trivial\\
	$n>1$: Sei $\a \not \subseteq \p_i $ für $i = 1,...,n$. Mit der Induktionsvoraussetzung folgt: $\a \not \subseteq \p_1 \cup ... \cup \p_{i-1} \cup \p_{i+1} \cup ... \cup \p_n $ für alle $i=1,...,n  \Ra $ Für alle $ i = 1,...,n $ existiert ein $ x_i \in \a $ mit $ x_i \notin \p_j $ für $ j \neq i $ \\
	1.Fall: Es existiert ein $ i \in \{1,...n\} $ mit $ x_i \notin \p_i.$ Dann $x \notin \bigcup_{j = 0}^{n} \p_j, $ fertig. \\
	2.Fall: $x_i \in \p_i $ für alle $i \in \{1,...n\} $. Setze $ y:= \sum_{j=1}^{n} x_1 \cdot ... \cdot x_{j-1} \cdot x_{j+1}  \cdot ... \cdot x_n$. Dann ist $y \in \a,\, y \notin \p_i $ für  alle $i \in \{1,...n\} $ ( "'Alle Summanden bis auf einen in $\p_i$"). Also $ \a \not \subseteq \bigcup_{i = 0}^{n} \p_i.$
\end{proof}
\begin{bem} \label{11.7}
	Seinen $ \a_1, \dots \a_n \subseteq A$ Ideale, $\p $ ein Primideal in $A$ mit $\p \supseteq \bigcap_{i = 0}^{n} \a_i$.  Dann existiert ein $j \in \{1,...n\} $ mit $\a_j  \subseteq \p$. Ist $\p =\bigcap_{i = 0}^{n} \a_i$, dann existiert ein $j \in \{1,...n\} $ mit $\a_j = \p$.
\end{bem}
\begin{proof}
	Angenommen  für alle $i \in \{1,...n\} $ gilt $ \a_i \not \subseteq \p. \Ra $ Für alle $i \in \{1,...n\} $ existiert ein $x_i \in \a_i, x_i \notin \p$. Dann ist  $x_1 \cdots x_n \notin \p$, da $ \p$ ein Primideal ist. Andererseits ist jedoch $x_1 \cdots x_n \in \bigcap_{i = 0}^{n} \a_i \subseteq \p.$, Widerspruch! Sei nun $ \p = \bigcap_{i = 0}^{n} \a_i $ Dann existiert ein $j \in \{1,...n\} $ mit $ \a_j \subseteq \p.  \\
	\Ra \p =\bigcap_{i = 0}^{n} \a_i \subseteq \a_j \subseteq \p \Ra \p = \a_j.$ 
\end{proof}
\begin{bem+df}
	Seinen $\a, \b \subseteq A $ Ideale, $a \in A $.
	\begin{itemize}
		\item[] $\a : \b := \{x \in A | \ x \b \subseteq \a \} $ heißt \define{Idealquotient\index{Idealquotients}} $\a $ durch $\b$. $\a : \b $ ist ein Ideal in $A$. 
		\item[] $\ann(\a) := (0) : \a = \{x \in A | \ x \a = 0\} $ heißt der \define{Annulator\index{Annulator eines Ideals}} von $\a$.
		\item[] $\ann(a) := \ann((a)) = \{x \in A| \ xa = 0\} $.
	\end{itemize}
\end{bem+df}
\begin{anm}
	\begin{itemize}
		\item $\a \b \subseteq \c \Lra \a \subseteq \c : \b $
		\item Die Menge der Nullteiler von $A$ ist gegeben durch $\bigcup_{ x \in A \backslash\{0\}} ann(x)$
	\end{itemize}
\end{anm}
\begin{bsp}
	$A = \Z, m,n \in \Z $ mit $(m,n) \neq (0) \Ra (m): (n) = \left(\frac{m}{ggt(m,n)}\right)$.
\end{bsp}
\begin{df}
	Sei $\a \subseteq A$ ein Ideal. 
	\begin{itemize}
		\item[] $\sqrt{\a} := \{x \in A | \ \text{Es existiert ein } n \in \N \ \text{mit } x^n \in \a \} $ heißt das \define{Radikal\index{Radikal eines Ideals}} von $\a $. 
	\end{itemize}
\end{df}
\begin{anm} 
	\begin{itemize}
		\item $\sqrt{(0)} = \NN(A)$
		\item  Ist $\pi: A \to \QR{A}{\a} $ die kanonische Projektion, dann ist:
		\begin{eqnarray*}
			\sqrt{\a} &=& \{x \in A | \ \text{Es existiert ein } n \in \N \ \text{mit} \ x^n \in \a \} = \{x \in A| \pi(x) \in \NN\left(\QR{A}{\a}\right)\}\\
		 &=& \pi^{-1}(\NN(\QR{A}{\a}))= \pi^{-1}\left(\bigcap_{\p \subseteq A/\a \atop \text{Primideal} } \p \right) = \bigcap_{\p \subseteq A \text{ PI}\atop \text{mit} \a \subseteq \p} \p
		\end{eqnarray*}
		Insbesondere ist $\sqrt{\a}$ ein Ideal.
	\end{itemize}
\end{anm}
\begin{df}
	Sei $B$ ein kommutativer Ring, $ f: A \to B $ ein Ringhomomorphimsus, $\a \subseteq A, \b \subseteq B $ Ideale. \\
	\begin{itemize}
		\item[] $\a^e := Bf(\a) = \{\sum_{endl.} b_i f(a_i)| b_i \in B, a_i \in \a \} $ heißt die \define{Erweiterung\index{Erweiterung von Idealen}} von $\a$ auf $B$.
		\item[] $\b^c := f^{-1}(\b) $ heißt die \define{Kontraktion\index{Kontraktion von Idealen}} von $\b$ auf A.
	\end{itemize}
\end{df}
\begin{anm}
	\begin{itemize}
		\item $\a^{e}, f^{c} $ sind Ideale in $B$ bzw. in $A$. 
		\item Wir können $f$ faktorisieren in $ A \xrightarrow{p} \im f \xhookrightarrow{\iota} B $. Die Situation für $p$ ist einfach die für $ \iota $ ist kompliziert. 
		\item $\q \in B $ Primideal $\Ra \q^{c} \subseteq A $ Primideal wegen $ \QR{A}{f^{-1}(\q)} \xhookrightarrow{} \underbrace{\QR{B}{\q}}_{\text{nullteilerfrei}}$ \\(beachte $f^{-1}(\q) = \q^c$)
		\item Ist $ \p \subseteq A $ ein Primideal, dann ist $ \p^e \subseteq B$ im Allgemeinen kein Primideal. (Übung: $p$ Primzahl mit $p \equiv 1 \mod  4$. Unter $ f: \Z \to \Z[i] $ ist $(p)^e$ ein Produkt zweier verschiedener Primideale.)
		 % hier auch
	\end{itemize}
\end{anm}
\begin{bem} \label{11.12}
	Sei $B$ ein kommutativer Ring, $f: A \to B $ ein Ringhomomorphismus, $\a \subseteq A$ Ideal, $\b \subseteq B $ Ideal. Dann gilt: 
	\begin{enumerate} [label= \alph*)]
		\item $\a \subseteq \a^{ec} $
		\item $\a^e = \a^{ece}$
		\item $\b^{ce} \subseteq \b $
		\item $\b^{c} = \b^{cec}$ 
	\end{enumerate}
\end{bem}
\begin{proof}
	(a),(c) klar.  \\
	(b) $\a^e \subseteq (\a^{ec})^e , (\a^e)^{ce} \subseteq \a^e$ \\
	(d) analog. 
\end{proof}
\begin{sa} \label{11.13}
	Sei $B$ ein kommutativer Ring, $f: A \to B $ ein Ringhomomorphismus. Setze
	$$C := \{ \a \subseteq A \ \text{Ideal} \ | \ \a \ \text{ist Kontraktion eines Ideals aus }B \} $$
	$$E:= \{\b \subseteq B \ \text{Ideal} \ | \ \b \ \text{ist Erweiterung eines Ideals aus } A\} $$. Dann gilt:
	\begin{enumerate} [label= \alph*)]
		\item $C=\{\a \subseteq A \ \text{Ideal} \ | \ \a^{ec} = \a \} $
		\item $E= \{\b \subseteq B \ \text{Ideal} \ |\ \b^{ce} = b\} $
		\item Die Abbildungen $$\Phi: C \to E, \quad \a \mapsto \a^e, \quad \quad \Psi: E \to C, \quad \b \mapsto \b^c $$ Sind zueinander inverserse, inklusionserhaltende Bijektionen.
	\end{enumerate}
\end{sa}
\begin{proof}
	\begin{enumerate} [label= \alph*)]
		\item "$\supseteq$" klar. "$\subseteq$" $\a \in C \Ra \text{es existiert ein } \b \subseteq B $ Ideal mit $ \a = \b^c \Ra \a^{ec} = \b^{cec} = \b^c \subseteq \a$ (letztes "$=$" per \ref{11.12}(d))
		\item analog 
		\item klar nach (a), (b).
	\end{enumerate}
\end{proof}
\begin{anm}
	Erinnerung an LA1: $T \in M(n \times n, A)$, dann existiert eine komplementäre Matrix $T^{\#} \in M(n \times n, A)$ zu $T$. Es ist $T^{\#}T = TT^{\#} = det(T)E_n.$ (LA1: Satz 17.20)
\end{anm}
\begin{sa}\label{11.14}
	Sei $M$ ein endlich erzeugter $A$-Modul, $\a \subseteq A $ ein Ideal, $\phi \in End_A(M)$ mit $ \phi(M) \subseteq \a M$. Dann existiert ein $ n \in N, a_0,...,a_{n-1} \in \a $ mit: 
	$$ \phi^{n} + a_{n-1}\phi^{n-1}+...+ a_1\phi + a_0id_M  = 0 $$
\end{sa} 
\begin{proof}
	Sei $x_1,...,x_n $ ein Erzeugendensystem von $M$. Dann ist $\phi(x_i) \in \a M = \{ \sum_{endl.} \alpha_i y_i | \alpha_i \in \a, y_i \in M \},$ insbesondere existieren $a_{i1},...,a_{in} \in \a $ mit $ \phi(x_i) = \sum_{j=1}^{n} a_{ij} x_j$ (stelle $y_i$ als Linearkombination von $x_1,...,x_n$ dar). Damit ist $$\sum_{j=1}^{n} ( \delta_{ij}\phi - a_{ij}id_M)(x_j) = 0, \quad \forall i=1,...,n $$ Betrachte $ A[\phi] = \{b_n \phi^n + b_{n-1}\phi^{n-1} +...+b_1\phi + b_0 id_M \ | \ n \in \N_0, b_i \in A \} $, ( was ein kommutativer Unterring von $End_A(M); $ ist mit der Konvention: $\phi^0 = id_M $). 
	Setze nun $$T:= ( \delta_{ij} \phi - a_{ij})_{ij} \in M(n \times n, A[\phi])$$
	$M $ wird via $ (\sum b_i \phi^i)x = \sum b_i \phi^i(x) $ zum $A[\phi]$-Modul. $$T \cdot \left( \begin{array}{c}x_1\\:\\ x_n\end{array} \right) = 0
	\Ra  0 = T^{\#}T \left( \begin{array}{c}x_1\\:\\ x_n\end{array} \right)= \det(T)\left( \begin{array}{c}x_1\\:\\ x_n\end{array} \right)$$
	Da $x_1,...,x_n $ ein Erzeugendensytem von $M$ ist folgt: $ det(T) x = 0 $ für alle $x \in M$, also $det(T) = 0 $. Andererseits gilt aber auch: $$det(T) = det(\delta_{ij} \phi - a_{ij})_{ij}) = \phi^{n} + a_{n-1}\phi^{n-1}+...+ a_1\phi + a_0id_M$$ mit $a_0,...,a_{n-1} \in \a $ nach Leibniz-Formel.
\end{proof}
\begin{fo} \label{11.15}
	Sei $M$ ein endlich erzeugter $A$-Modul, $\a \subseteq A $ ein Ideal, mit $\a M = M$. 
	Dann existiert ein $a \in A $ mit $ a = 1 \mod \a$ mit $ aM = 0. $
\end{fo}
\begin{proof}
	Mit $ \phi = id_M$ ist $\phi(M) = M = \a M $ Dann existieren  $a_0,..,a_{n-1} \in \a$, sodass $0 = id_M^{n} + a_{n-1}id_M^{n-1}+...+ a_1\phi + a_0id_M, $ das heißt: 
	$ 0 = x + a_{n-1}x +...+ a_1x+a_0x = \underbrace{(1+ a_{n-1}+...+a_1 +a_0)}_{:=a} x \Ra a \equiv 1 \mod \a,\, ax =0 $
\end{proof}
\begin{sa}[Nakayama-Lemma] \label{11.16}\index{Nakayama-Lemma}
	Sei $ A $ ein lokaler Ring mit maximalen Ideal $\m$, $M$ ein endlich erzeugter $A$-Modul, $ \QR{M}{\m M } = 0$. Dann ist $ M = 0$. 
\end{sa}
\begin{proof}
	 Aus $ \QR{M}{\m M } = 0$ folgt $M = \m M$. Nach \ref{11.15} folgt, dassein $a \in A, a \equiv 1 (\text{mod} \ \m) $ existiert mit $ aM = 0 $. Wegen  $a \equiv 1 \mod \m$ ist $ a \in A^{*} $. Mit \ref{11.2} folgt $M = 0 $. 
\end{proof}
\begin{fo} \label{11.17}
	Sei $A$ ein lokaler Ring mit maximalen Ideal $ \m$, $M$ ein endlich erzeugter $A$-Modul, $N \subseteq M $ Untermodul mit $ M = \m M + N $. Dann ist $M = N $.
\end{fo}
\begin{proof}
	Es ist $$\m(\QR{M}{N}) = \QR{(\m M + N)}{N} = \QR{M}{N}$$
	Mit dem Nakayama-Lemma folgt unmittelbar: $\QR{M}{N} = 0$, also $ M = N. $
\end{proof}
\begin{fo} \label{11.18}
	Sei $A$ ein lokaler Ring mit maximalen Ideal $\m$, $M$ ein endlcih erzeugter $A$-Modul, $x_1,...,x_n \in M $. Dann sind äquivalent: 
	\begin{enumerate} [label= \roman*)]
		\item $x_1, \dots ,x_n $ ist ein Erzeugendensystem von M 
		\item Die Bilder $ \bar{x_1},\dots ,\bar{x_n} $ von $x_1,\dots ,x_n$ in $\QR{M}{\m M } $ erzeugen den $\QR{A}{\m} $-VR \ $\QR{M}{\m M}$
	\end{enumerate}
\end{fo}
\begin{proof}
	(i)$\Ra $(ii)  klar. \\
	(ii)$\Ra$(i) Setze $N:= \sum_{i = 1}^{n} A x_i.$ Nach Voraussetzung ist $$ \QR{(N + \m M )}{\m M} = \QR{M}{\m M} \Longrightarrow N + \m M  = M$$
	Mit \ref{11.17} folgt: $N=M$.
\end{proof}
\begin{anm}
	Wichtig: $M$ endlich erzeugt ist eine Voraussetzung in \ref{11.18}.
\end{anm}
\newpage
\subsection{Lokalisierung}
\textbf{Erinnerung} (an Algebra 1): Sei $S\subseteq A$ ein Untermonoid bezüglich "'$\cdot$"' (d.h. $1\in S$ und $a,b\in S\Ra ab\in S$). Definiere eine Relation "'$\sim$"' auf $A\times S$ wie folgt:
$$(a_1, s_1) \sim (a_2,s_2) \defi \text{Es existiert ein }t\in S \text{ mit } ta_2s_1 = ta_1s_2$$
"'$\sim$"' ist eine Äquivalenzrelation, setze $S^{-1}A:= \QR{A\times S}{\sim}$, wobei $\frac{a}{s}$ die Äquivalenzklasse von $(a,s)\in A\times S$ ist. Dann ist $S^{-1}A$ ein kommutativer Ring via
\begin{align*}
\frac{a_1}{s_1} + \frac{a_2}{s_2} &:= \frac{a_1s_2+a_2s_1}{s_1s_2},&\frac{a_1}{s_1} \cdot \frac{a_2}{s_2} &:= \frac{a_1a_2}{s_1s_2}
\end{align*}
Ferner gibt es einen Ringhomomorphismus $\tau:A \to S^{-1}A, \; a \mapsto \frac{a}{1}$. Diese ist genau dann injektiv, wenn $S$ nur aus Nichtnullteilern besteht.\\
\begin{center}
	\textbf{Im Folgenden sei $S\subseteq A$ ein Untermonoid bezüglich "'$\cdot$"', Erweiterung und Kontraktion von Idealen sind bezüglich $\tau$ zu verstehen.}
\end{center}

~\

\begin{bem+df}\label{12.1}
	Sei $\a\subseteq A$ ein Ideal
	\begin{enumerate}
		\item[] $S^{-1}\a := a^e=\{\frac{a}{s}\ | \ a\in \a, \, s\in S\}\subseteq S^{-1}A$ ist ein Ideal.
	\end{enumerate}
	Ferner gilt: $S^{-1}\a= S^{-1}A\Lra \a\cap S \neq \emptyset$. 
\end{bem+df}
\begin{proof}
	"'$\Ra$"' $S^{-1}\a = S^{-1}A \Ra 1 = \frac{1}{1} \in S^{-1}\a \Ra $ Es existiert ein $a\in \a, \, s\in S$ mit $\frac{a}{s} = \frac{1}{1}$. Damit exitstiert ein $t\in S$ mit $ta = ts$, also ist $\a \cap S \neq \emptyset$.\\
	"'$\La$"' Sei $\a\cap S\neq \emptyset$. Dann existiert ein $s\in \a \cap S$ mit $\frac{s}{s} = \frac{1}{1}\in S^{-1}A$, also ist $S^{-1}\a = S^{-1}A$
\end{proof}
\begin{bem}\label{12.2}
	Sei $\p \subseteq A$ ein Primideal mit $\p\cap S=\emptyset$. Dann ist $S^{-1}\p$ ein Primideal in $S^{-1} A$.
\end{bem}
\begin{proof}
	Seien $\frac{a_1}{s_1}, \frac{a_2}{s_2}\in S^{-1} A$ mit $\frac{a_1}{s_1} \cdot\frac{a_2}{s_2}\in S^{-1} \p$. Dann existieren $b\in \p, \, s\in S$ mit $\frac{a_1a_2}{s_1s_2} = \frac{b}{s}$. Dann existiert ein $t\in S$ mit $tsa_1a_2 = tbs_1s_2 \in \p$, woebi $t,s\notin \p$. Da $\p$ Primideal, muss also $a_1a_2\in \p$ gelten und damit $a_1\in \p$ oder $a_2\in \p$. Damit folgt schließlich $\frac{a_1}{s_1}\in S^{-1} \p$ oder $\frac{a_2}{s_2}\in S^{-1}\p$.
\end{proof}
\begin{bem}\label{12.3}
	Es gilt:
	\begin{enumerate}[label=\alph*)]
		\item Für die Abbildungen
		$$\begin{tikzcd}[row sep = tiny]
		\{\text{Ideale in } A\} \arrow[yshift = 0.5ex]{r}{\Phi} & \{\text{Ideale in } S^{-1}A\} \arrow[yshift = -0.5ex]{l}{\Psi} \\
		\a \arrow[mapsto]{r}& a^e=S^{-1} \a \\
		\b^c=\tau^{-1}(\b) & b\arrow[mapsto]{l}
		\end{tikzcd}$$
		gilt: $\Phi \circ \Psi = \id_{\{\text{Ideale in } S^{-1}A\}}$, insbesondere ist $\Phi$ surjektiv und $\Psi $ injektiv. Beide Abbildungen sind inklusionserhaltend.
		\item Die Abbildungen
		$$\begin{tikzcd}[row sep = tiny]
		\{\text{Primideale in } A \text{mit } \p\cap S = \emptyset\} \arrow[yshift = 0.5ex]{r}{\Phi} & \{\text{Primideale in } S^{-1}A\} \arrow[yshift = -0.5ex]{l}{\Psi} \\
		\p \arrow[mapsto]{r}& p^e=S^{-1} \p \\
		q^c=\tau^{-1}(q) & q\arrow[mapsto]{l}
		\end{tikzcd}$$
		sind bijektiv und invers zueinander, beide sind inklusionserhaltend.
	\end{enumerate}
\end{bem}
\begin{proof}
	\begin{enumerate}[label= \alph*)]
		\item Es ist zu zeigen, dass $b^{ce} = b$ für alle Ideale $b$ in $S^{-1}A$.\\
		"'$\subseteq$"' gilt nach \ref{11.12}.\\
		"'$\supseteq$"' Sei $\frac{a}{s}\in \b$ mit $a\in A, \, s\in S$. Dann ist $\frac{a}{1} = \frac{s}{1} \cdot \frac{a}{s} \in \b$. Dann ist $a\in c^c$, also $\frac{a}{s} \in \b^{ce}$.
		\item \begin{itemize}
			\item $\Psi$ ist wohldefiniert: Für ein Primideal $\q\in S^{-1}A$ ist $\q^c$ ein Primideal (vgl. Übungen). Es ist $\q^c\cap S=\emptyset$, denn andernfalls würde ein $s\in S$ existieren mit $\frac{s}{1} \in\q $, also $1 = \frac{1}{s} \cdot \frac{s}{1}\in \q$, Widerpsruch!
			\item $\Phi$ ist wohldefiniert nach \ref{12.2}.
		\end{itemize}
	Nach $a)$ ist $\Phi \circ \Psi=\id_{\{\text{Primideale in } S^{-1}A\}}$, also genügt es zu zeigen, dass für alle Primideale $\p \subseteq A$ mit $\p \cap S= \emptyset$ ist $\p^{ec} = \p$.\\
	"'$\supseteq$"' aus \ref{11.12} $a)$\\
	"'$\supseteq$"' Sei $a\in \p^{ec}$. Dann existiert ein $b\in \p, \, s\in S$ mit $\frac{a}{1} = \frac{b}{s}$, also existiert ein $t\in S$ mit $tas = tb$, d.h. $sta=tb$. Da $st\notin \p$ und $\p$ Primideal, folgt $a\in \p$.
	\end{enumerate}
\end{proof}
\begin{bem+df}\label{12.4}
	Sei $\p\subseteq A$ ein Primideal, setze $S:= A\backslash \p$ (ist ein Untermonoid).
	\begin{enumerate}
		\item[] $A_\p:= S^{-1}A$ heißt die \define{Lokalisierung von $A$ bei $\p$\index{Lokalisiserung von $A$ bei $\p$}}.
	\end{enumerate}
	$A_\p$ ist ein lokaler Ring mit dem maximalen Ideal $S^{-1} \p$. Erweiterung und Kontraktion liefern inklusionserhaltende Bijektionen zwischen der Menge der Primideale in $A$, die $\p$ enthalten und der Menge der Primideale in $A_\p$.
\end{bem+df}
\begin{proof}
	folgt aus \ref{12.3} $b)$ (beachte: $\q \cap S= \emptyset \Lra \q \subseteq \p$).
\end{proof}
\begin{bsp}
	Betrachte $A=\Z, \, \p = (p)$ für eine Primzahl $p$. Dann ist $$\Z_{(p)} = \left\{ \frac{m}{n} \in \Q|\, m,n \in \Z, \, \text{ggT}(m,n) = 1, \, p\nmid n\right\}$$
	lokal mit dem maximalen Ideal $$p\Z_{(p)} = \left\{\frac{m}{n} \in \Q| \, m,n\in \Z, \, \text{ggT}(m,n) = 1, \, p |m,\,, p\nmid n\right\}$$
\end{bsp}
\begin{bem+df}\label{12.6}
	Sei $M$ ein $A$-Modul. Wir definieren eine Relation "'$\sim$"' auf $S\times M$ wie folgt:
	$$(s_1,m_1) \sim (s_2, m_2) \defi \text{Es existiert ein } t\in S \text{ mit } ts_2m_1 = ts_1m_2$$
	"'$\sim$"' ist ein Äquivalenzrelation und wir setzen $S^{-1}M := \QR{(S\times M)}{\sim}$; $\frac{m}{s}$ bezeichne die Äquivalenzklasse on $(s,m) \in S\times M$. Dann ist $S^{-1}M$ ein $S^{-1}A$-Modul vermöge
	\begin{align*}
	\frac{m_1}{s_1}+ \frac{m_2}{s_2}&:= \frac{s_2m_1+s_1m_2}{s_1s_2}, & \frac{a}{s} \cdot \frac{m}{t}&:= \frac{am}{st}
	\end{align*}
	für $m_1,m_2,m \in M, \, s_1,s_2,s,t\in S$. $S^{-1}M$ heißt der \define{Quotientenmodul\index{Quotientenmodul}} von $M$ nach $S$. Es gibt eine natürliche Abbildung $\tau:M \to S^{-1} M, \, m \mapsto \frac{m}{1}$.
\end{bem+df}
\begin{proof}
	nachrechnen.
\end{proof}
\begin{anm}
	$S^{-1}M$ ist auch ein $A$-Modul vermöge $a\cdot \frac{m}{s} := \frac{a}{1} \cdot \frac{m}{s}= \frac{am}{s}$. $\tau$ ist dann ein Homomorphismus von $A$-Moduln.
\end{anm}
\begin{sa}
	Seien $M,N$ $A$-Moduln, $\phi:M \to N$ $A$-linear, $\tau_M:M \to S^{-1}M$,\\
	\begin{minipage}[t]{0.6\textwidth}
		 $\tau_N:N \to S^{-1}N$ die kanonischen Abbildungen.
		 Dann gibt es genau eine $S^{-1}A$-lineare Abbildung
		$$S^{-1}\phi:S^{-1}M \longrightarrow S^{-1}N $$
		mit $S^{-1}\phi \circ \tau_M = \tau_N \circ \phi$
	\end{minipage}
	\begin{minipage}[t]{0.4\textwidth} 
		$$\begin{tikzcd}
		M \arrow{r}{\phi} \arrow[swap]{d}{\tau_M} & N \arrow{d}{\tau_N} \\
		S^{-1}M \arrow[dashed, red]{r}{S^{-1}\phi}& S^{-1}N
		\end{tikzcd}$$
	\end{minipage}
	Auf diese Weise wird $S^{-1}\_:A$-Mod$\longrightarrow S^{-1}A$-Mod zu einem additiven Funktor.
\end{sa}
\begin{proof}
	\begin{enumerate}
		\item Existenz: Setze $S^{-1}\phi:S^{-1}M \to S^{-1}N, \; \frac{m}{s} \mapsto \frac{\phi(m)}{s}$.
		\begin{itemize}
			\item $S^{-1}\phi$ ist wohldefiniert: Sei $(s_1,m_1) \sim (s_2, m_2)$. Dann existiert ein $t\in S$ mit $ts_2m_1 = ts_1m_2$, also 
			$ts_2\phi(m_1) = ts_1\phi(m_2)\Ra (s_1, \phi(m_1)) \sim (s_2\phi(m_2)) \Ra \frac{\phi(m_1)}{s_1} = \frac{\phi(m_2)}{s_2}$. 
			\item $S^{-1}\phi$ ist $S^{-1}A$-linear.
			\item Das Diagramm kommutiert, denn 
			$$(S^{-1}\phi)(\tau_M(m)) = (S^{-1}\phi)\left(\frac{m}{1}\right) = \frac{\phi(m)}{1} = \tau_N(\phi(m))$$
		\end{itemize}
		\item Eindeutigkeit: Aus der Kommutativität des Diagramms und der $S^{-1}A$-Linearität vo $S^{-1}\phi$ folgt:
		\begin{eqnarray*}
			(S^{-1}\phi)\left(\frac{m}{s}\right) &=& S^{-1}\phi\left(\frac{1}{s} \cdot \frac{m}{1}\right) = \frac{1}{s} S^{-1}\phi\left(\frac{m}{1}\right) = \frac{1}{s}S^{-1}\phi(\tau_M(m)) = \frac{1}{s} (\tau_N(\phi(m)))\\
			&=& \frac{1}{s} \cdot \frac{\phi(m)}{1} = \frac{\phi(m)}{2}
		\end{eqnarray*}
		\item Die Funktorialität und Additivität von $S^{-1}\_$ ist leicht nachzurechnen.
	\end{enumerate}
\end{proof}
\begin{sa}\label{12.8}
	$S^{-1}\_:A$-Mod $\longrightarrow S^{-1}A$-Mod ist ein exakter Funktor.
\end{sa}
\begin{proof}
	Sei $\begin{tikzcd}
	M' \arrow{r}{f} & M \arrow{r}{f} & M''
	\end{tikzcd}$ eine exakte Folge von $A$-Moduln. Nach den Übungen genügt es zu zeigen, dass 
	$$\begin{tikzcd}
	S^{-1}M' \arrow{r}{S^{-1}f} & S^{-1}M \arrow{r}{S^{-1}g} & S^{-1}M''
\end{tikzcd}$$
exakt ist, d.h. $\im(S^{-1}f) = \ker(S^{-1}g)$.\\
"'$\subseteq$"' Es ist $S^{-1}g\circ S^{-1}f = S^{-1}(\underbrace{g\circ f}_{=0}) = 0$\\
"'$\supseteq$"' Sei $\frac{m}{s} \in \ker(S^{-1}g)$. Dann ist $\frac{g(m)}{s} = 0 = \frac{0}{1}$, also existiert ein $t\in S$ mit $tg(m) = 0$, d.h. $g(tm) = 0 \Ra tm\in \ker g = \im f$, also existiert ein $m'\in M$ mit $f(m') = tm$. Damit folgt schließlich
$$S^{-1}f\left(\frac{f(m')}{st} \right) = \frac{f(m')}{st} = \frac{tm}{st} = \frac{m}{s}$$
also $\frac{m}{s} \in \im \left(S^{-1}f\right)$.
\end{proof}
\begin{fo} \label{12.9}
Sei $M$ ein $A$-Modul, $N\subseteq M$ ein Untermodul. Dann ist $S^{-1}N$ auf natürliche Weise ein Untermodul von $S^{-1}M$ und es gilt: 
$$S^{-1} \left(\QR{M}{N}\right) \cong \QR{S^{-1}M}{S^{-1}N}$$
(wir identifizieren diese Moduln im Folgenden mit einander.)
\end{fo}
\begin{proof}
Wende $S^{-1}\_$ auf die exakte Folge 
$$\begin{tikzcd}
0 \arrow{r} & N \arrow{r} & M \arrow{r} & \QR{M}{N} \arrow{r} & 0
\end{tikzcd}$$
an. Dann olgt die Behauptung aus \ref{12.8}
\end{proof}
\begin{bem}\label{12.10}
Seien $M,N$ $A$-Moduln, $\phi:M \to N$ $A$-linear. Dann gilt:
\begin{enumerate}[label= \alph*)]
	\item $\ker(S^{-1}\phi) = S^{-1}(\ker \phi)$
	\item $\coker(S^{-1}\phi) = S^{-1}(\coker\phi)$
	\item $\im(S^{-1}\phi) = S^{-1}(\im \phi)$
\end{enumerate}
\end{bem}
\begin{proof}
\begin{enumerate}[label= \alph*]
	\item Wende $S^{-1}$ auf die exakte Folge $\begin{tikzcd}
	0 \arrow{r} & \ker \phi \arrow{r} & M \arrow{r}{\phi}& N
	\end{tikzcd}$ an.
	\item Wende $S^{-1}$ auf die exakte Folge $\begin{tikzcd}
	M \arrow{r} & M  \arrow{r} & \coker \phi \arrow{r}& 0
	\end{tikzcd}$ an.
	\item Wende $S^{-1}$ auf die exakte Folge $\begin{tikzcd}
	0 \arrow{r} & \im \phi \arrow{r} & N \arrow{r}& \coker \phi \arrow{r} & 0
	\end{tikzcd}$ an.
\end{enumerate}
\end{proof}
\begin{bem}\label{12.11}
Für die Abbildungen:
$$\begin{tikzcd}[row sep = tiny]
\{A\text{-Untermoduln von } M\} \arrow[yshift = 0.5ex]{r}{\Phi} & \{S^{-1}A\text{-Untermoduln von } S^{-1}M\} \arrow[yshift = -0.5ex]{l}{\Psi} \\
N \arrow[mapsto]{r}& S^{-1}N \\
\tau^{-1}(P) & P\arrow[mapsto]{l} 
\end{tikzcd}$$
gilt $\Phi \circ \Psi = \id_{\{S^{-1}A\text{-Untermoduln von } S^{-1}M\}}$, insbesondere ist $\Phi$ surjektiv und $\Psi$ injektiv. Beide Abbildungen sind inklusionserhaltend.
\end{bem}
\begin{proof}
	nachrechnen.
\end{proof}
\begin{fo} \label{12.12}
	Es gilt: 
	\begin{enumerate} [label= \alph*)]
		\item Ist $M$ ein endlich erzeugter $A$-Modul, dann folgt: $S^{-1}M $ ist ein endlich erzeugter $S^{-1}A$-Modul
		\item Ist $M$ ein  noetherscher $A$-Modul, dann ist auch $S^{-1}M$ ein noetherscher $S^{-1}A$-Modul. 
	\end{enumerate}
\end{fo}
\begin{proof}
	\begin{enumerate}
		\item Sei $x_1,\dots,x_r $ ein Erzeugendensystem von $M$ über $A$, dann ist $ \frac{x_1}{1}, \dots, \frac{x_r}{1} $ ein Erzeugendensystem von $S^{-1}M$ über $S^{-1}A$.
		\item Sei $M$ ein noetherscher $A$-Modul, $L \subseteq S^{-1}M $ ein $S^{-1}A$-Untermodul. Mit \ref{12.11} folgt die Existenz eines Untermoduls $N$ in $M$ mit $ L = S^{-1}N $, da $M$ noethersch ist $N$ endlich erzeugt. Mit (a) folgt $L = S^{-1}N$ ist endlich erzeugt über $S^{-1}A$.
	\end{enumerate}
\end{proof}
\begin{df} \label{12.13}
	Sei $M$ ein $A$-Modul, $\p \subseteq A $ ein Primideal. Wir setzen $S := A \backslash \p$.
	\begin{enumerate}
		\item[] $M_{\p} := S^{-1}M $ heißt die \define{Lokalisierung\index{Lokalisierung}} von $M$ bei $\p$.
	\end{enumerate}  Für einen Homomorphismus $\phi: M \to N $ von $A$-Moduln ist entsprechend $\phi_{\p} = S^{-1}\phi: M_{\p} \to N_{\p} $ definiert. 
\end{df}
\begin{anm}
	Eine Eigenschaft $(E)$ eines $A$-Moduls $M$ nennt man eine \define{lokale Eigenschaft\index{lokale Eigenschaft eines Moduls}}, wenn gilt: $M$ erfüllt $(E) \Lra M_{\p} $ erfüllt $(E)$ für jedes Primideal $ \p \subseteq A $. 
\end{anm}
\begin{sa} \label{12.14}
	Sei $M$ ein $A$-Modul. Dann sind äquivalent: 
	\begin{enumerate} [label= \roman*)]
		\item $M = 0$
		\item $M_{\p} = 0 $ für alle Primideale $\p \subseteq A$ 
		\item $M_{\m} = 0 $ für alle maximalen Ideale $\m \subseteq A $
	\end{enumerate}
\end{sa}
\begin{proof}
	$(i) \Ra (ii) \Ra (iii) $ trivial \\
	$(iii) \Ra (i) $ Sei $M \neq 0.$ Dann existiert ein $x\in M, x\neq 0.$ Es ist $\ann_{A}(x) \subseteq A $ ein Ideal mit $\ann_{A}(x )\neq A.$ Wegen $1 \notin \ann_A(x)$, folgt dass ein maximales Ideal $\m \subseteq A $ mit $ann_A(x)\subseteq \m $. Für alle $s \in A\backslash \m \subseteq A \backslash \ann_A(x) $ ist $sx \neq 0$ ist $ \frac{x}{1} \neq \frac{0}{1} $ in $M_{\m} $. Daraus folgt $M_{\m} \neq 0. $
\end{proof}
\begin{fo} \label{12.15}
	Sei  $\begin{tikzcd}
	 M^{'} \arrow{r}{f} & M \arrow{r}{g} & M^{''} 
	\end{tikzcd}$ eine Sequenz vn $A$-Moduln. Dann sind äquivalent: 
	\begin{enumerate} [label= \roman*)]
		\item $\begin{tikzcd} M^{'} \arrow{r}{f} & M \arrow{r}{g} & M^{''} \end{tikzcd}$ ist exakt 
		\item $\begin{tikzcd} M_{\p}^{'} \arrow{r}{f_{\p}} & M_{\p} \arrow{r}{g_{\p}} & M_{\p}^{''}  \end{tikzcd}$ ist exakt für alle Primideale $\p \subseteq A$. 
		\item $\begin{tikzcd} M_{\m}^{'} \arrow{r}{f_{\m}} & M_{\m} \arrow{r}{g_{\m}} & M_{\m}^{''}  \end{tikzcd}$ ist exakt für alle maximalen Ideale $\m \subseteq A$.
	\end{enumerate}
\end{fo}
\begin{proof}
	$(i) \Ra (ii) $ aus \ref{12.8}, $(ii) \Ra (iii)$ trivial. \\
	$(iii) \Ra (i) $ zu zeigen ist: $ \im f = \ker g $: \\
	"'$\subseteq$"' Für jedes maximale Ideal $\m \subseteq A $ ist $$(\im (g \circ f))_{\m} = \im((g \circ f)_{\m}) = \im (g_{\m} \circ f_{\m}) = 0$$ Mit \ref{12.14} folgt $\im(g \circ f) = 0 \Ra g \circ f = 0$. \\
	"'$\supseteq$"' Setze $ N := \QR{\ker g }{\im f} $ mit \ref{12.9} folgt: $$N_{\m} = \QR{(\ker g)_{\m} }{(\im f)_{\m}} = \QR{\ker g_{\m} }{\im f_{\m}} = 0 $$ für alle maximalen Ideale $\m \subseteq A$. Mit \ref{12.14} folgt $\ker g = \im f $.
\end{proof}
\begin{fo} \label{12.16}
	Seien $M,N$ $A$-Moduln, $f: M \to N $ $A$-Modulhomomorphismen. Dann gilt: 
	\begin{enumerate} [label= \alph*)]
		\item $f$ injektiv $\Lra f_{\m} $ injektiv für alle maximalen Ideale $\m \subseteq A  \Lra f_{\p} $ injektiv für alle Primideale $\p \subseteq A $. 
		\item $f$ surjektiv $ \Lra f_{\m} $ surjektiv für alle maximalen Ideale $\m \subseteq A  \Lra f_{\p} $ surjektiv für alle Primideale $\p \subseteq A $. 
		\item $f = 0  \Lra f_{\m} = 0 $ für alle maximalen Ideale $\m \subseteq A  \Lra f_{\p} = 0 $ für alle Primideale $\p \subseteq A $. 
	\end{enumerate}
\end{fo}
\begin{proof}
	\begin{enumerate} [label= \alph*)]
		\item Wende \ref{12.15} an auf $\begin{tikzcd}	0 \arrow{r} & M \arrow{r}{f} & N
		\end{tikzcd}$ an.
		\item Wende \ref{12.15} an auf $\begin{tikzcd}	M \arrow{r}{f} & N \arrow{r} & 0
		\end{tikzcd}$ an.
		\item Wende \ref{12.14} auf $\im f $ an.
	\end{enumerate}
\end{proof}
\begin{bem} \label{12.17}
	Sei $A$ nullteilerfrei, $K = \Quot(A) $. Die natürliche Abbildung $A \to K $ beziehungsweise $A_{\p} \to K $, $\p$ Primideal in $A$, sind alle injektiv, fasse also $A$ bzw $A_{\p} $ als Unterringe von $K$ auf. Dann gilt: $$ A = \bigcap_{\p \subseteq A\atop \text{Primideal}} A_{\p} = \bigcap_{\m \subseteq A\atop \text{max. Ideal}} A_{\m}$$.
\end{bem}
\begin{proof}[Für Primideale]
	"$\subseteq" $klar. \\
	"$\supseteq"$ Sei $ x \in K $ mit $x \in A_{\p} $ für alle Primideale $ \p \subseteq A $. Setze $$\phi: A \to \QR{K}{A}, \quad a \mapsto ax +A$$ (Homomorphismus von $A$-Moduln) dann ist
	$$\phi_{\p}: A_{\p} \to \left(\QR{K}{A}\right)_{\p} = \QR{k_{\p}}{A_{\p}} , \quad \frac{a}{s} \mapsto \frac{ax}{s} + A_\p$$
	die Nullabbildung für alle Primideale $\p\subseteq A$ wegen $x\in A_\p$. Nach \ref{12.16} ist $\phi=0$, also insbesondere $\phi(1) = 0=x+ A=A$, also ist $x\in A$. Analog für maximale Ideale.
\end{proof}
\newpage
\subsection{ Tensorprodukt und flache Moduln}
\begin{df}\label{13.1}
	Seien $L,M,N$ $A$-Moduln, $\phi: M \times N \to L. $. $ \phi$  heißt \define{A-bilinear\index{bilineare Abbildung}} $\defi$ für jedes $n \in \N $ ist die Abbildung $M \to L \quad m \mapsto \phi(m,n) $ $A$-linear und für jedes $m \in M $ ist die Abbildung $ N \to L \quad n \mapsto \phi(m,n)  $ $A$-linear.
\end{df}
\begin{df} \label{13.2}
	Seien $M,N$ $A$-Moduln, Ein \define{Tensorprodukt\index{Tensorprodukt}} von $M$ und $N$ über $A$ ist ein $A$-Modul $T$ zusammen mit einer $A$-bilinearen Abbildung $\tau: M \times N \to T $ sodass folgende Universelle Eigenschaft erfüllt ist: Für jeden $A$-Modul $L$ und jede $A$-lineare Abbildung $\phi: M \times N \to L $ gibt es genau einen $A$-Modulhomomorphismus $\alpha:  T \to L $, sodass $\alpha \circ \tau = \phi$ gilt:
	$$\begin{tikzcd}
	M \times N  \arrow{rr} \arrow{dr}{\tau} && L \\
	& T \arrow[dashed, red]{ur}{\alpha}&
	\end{tikzcd}$$
\end{df}
\begin{sa} \label{13.3}
	Seien $M,N $ $A$-Moduln. Dann gilt: 
	\begin{enumerate} [label= \alph*)]
		\item Es gibt ein Tensorprodukt von $M,N$ über $A$.
		\item Sind $T,T'$ Tensorprodukte von $M,N$ über $A$ mit $ A$-bilinearen Abbildungen $\tau: M \times N \to T$, $\tau^{'}: M \times N \to T^{'}$, dann existiert genau ein $A$-Modulhomomorphismus $\alpha: T \to T^{'} $ mit $\alpha \circ \tau = \tau^{'}. $ $ \alpha $ ist ein Isomorphismus. Mit anderen Worten: Das Tensorprodukt von $M,N$ ist eindeutig bestimmt bis auf einen eindeutigen Isomorphismus. 
		\item Ist $T$ ein Tensorprodukt von $M,N$ über $A$ mit einer $A$-bilinearen Abbildung $\tau: M \times N \to T $ und setzen wir für $m \in M, n \in N$: 
		$$ m \otimes n  := \tau(m,n)$$
		Dann wird $T$ erzeugt von den Elementen $m \otimes n $, $m \in M, n \in N $ das heißt jedes Element von $T$ ist von der Form $\sum_{i=1}^{r} a_i (m_i \otimes n_i) $ mit $ a_i \in A, m_i \in M , n_i \in N $. 
		Hierbei gilt:
		 \begin{align*}
		 (m +m^{'}) \otimes n &= m \otimes n + m^{'} \otimes n,&
		  m \otimes (n+n^{'}) &= M \otimes n + m \otimes n^{'},\end{align*}
		 $$(am) \otimes n = a ( m \otimes n ) = m \otimes (an) $$
	   für alle $m,m^{'} \in M, n,n^{'} \in N, a\in A $. Notation für Tensorprodukt von $M$ und $N$ über $A$: $M \otimes_A N $
	\end{enumerate}
\end{sa}
\begin{proof} 
	\begin{enumerate} [label= \alph*)]
		\item 1. Es gibt eine kanonische Inklusion:
		$$\begin{tikzcd}[row sep = tiny]
			\iota: M \times N\arrow[hook]{r} & A^{(M \times N)} = \bigoplus_{k\in M \times N} A	\\
			(m,n) \arrow[mapsto]{r} & [m,n] = ([m,n]_k)_{k\in M\times N}	
		\end{tikzcd}$$
		(was kein $A$-Modulhomomorphismus ist) wobei 
		$$[m,n]_k:= \begin{cases}
		1, & \text{falls } k=(m,n) \\0 & \text{sonst}
		\end{cases}$$
		Die Elemente $[m,n] $ bilden offenbar eine $A$-Basis von $A^{M \times N } $. Sei $U$ ein Untermodul von $A^{M \times N }$, der von allen Elementen der folgenden Gestalt erzeugt wird: 
		\begin{align*}
		 &[m + m^{'}, n] - [m,n] - [m^{'}, n], &[m, n + n^{'}] - [m,n] -[m,n^{'}], \\
		 &[am,n] -a[m,n],& [m,an] -a[m,n]
		\end{align*} mit $m,m^{'} \in M, n,n^{'} \in N, a\in A.$ Setze $$T:= \QR{A^{M \times N}}{U}, \quad \tau: M \times N \overset{\iota}{\hookrightarrow} A^{M \times N} \overset{\pi}{\to} T,\quad  (m,n) \mapsto \bar{[m,n]}$$ 
		2. T ist zusammen mit $\tau$ ein Tensorprodukt von $M,N$ über $A$: 
		\begin{itemize}
			\item T ist $A$- bilinear nach Konstruktion von U. ( zum Beispiel: $\tau(m +m^{'},n) = \bar{[m +m^{'},n]} = \bar{[m,n]} + \bar{[m^{'},n]} = \tau(m,n) + \tau(m^{'},n)$)
			\item $T$ erfüllt die Universelle Eigenschaft: Sei $L$ ein $A$-Modul $\phi: M \times N \to L $ $A$-bilinear. Wir erhalten eine $A$-lineare Abbildung $$\psi: A^{M \times N } \to L, \quad \psi([m,n]) := \phi(m,n)$$ Wegen $\phi$ bilinear ist $\psi(U) = 0:$
			\begin{eqnarray*} \psi( [m + m', n] - [m,n] - [m', n]) &=& \psi([m + m', n]) -\psi([m,n]) - \psi([m', n])\\
				& =& \phi(m + m', n) -\phi(m,n) -\phi(m', n) \\
				&=& 0
			 \end{eqnarray*}. Daraus erhalten wir eine $A$-lineare Abbildung $$ \alpha: T = \QR{A^{M \times N}}{U} \to L $$ mit $\alpha([m,n]) = \psi([m,n]) = \phi(m,n)$ also $\alpha(\tau(m,n)) = \phi(m,n)$, das heißt $\alpha \circ \tau = \phi $. $\alpha $ ist durch die Vorgabe $\alpha \circ \tau = \phi $ eindeutig bestimmt, da die Elemente $ \bar{[m,n]} = \tau(m,n) $ den $A$-Modul $T$ erzeugen. 
		\end{itemize}
		\item mit Standardargumenten 
		\item aus der Konstruktion im Beweis von (a)
	\end{enumerate}
\end{proof}
\begin{anm}
	Für $m \in M $ ist stets $m \otimes 0 =0 $ denn  $ m \otimes 0 = m \otimes (0+0) = m \otimes 0 + m \otimes 0 $ analog $ 0 \otimes n = 0 $ für $n \in N$. 
\end{anm}
\begin{bsp}
	\begin{enumerate}
		\item $\QR{\Q}{\Z} \otimes_{\Z} \QR{\Q}{\Z} = 0 $ Denn: Seien $a,b \in \QR{\Q}{\Z}$ so existiert ein $ n \in N $ mit $ na = 0 $, es existiert ein $b^{'} \in \QR{\Q}{\Z} $ mit $nb^{'} = b \Ra a \otimes b = a \otimes (nb^{'}) = (na) \otimes b^{'} = 0 \otimes b^{'}$
		\item $\QR{\Z}{2\Z} \otimes_{\Z} \QR{\Z}{3\Z} = 0 $. Denn: Für $a \in \QR{\Z}{2\Z}, b \in \QR{\Z}{3\Z} $ ist $a \otimes b = (3a) \otimes b = a \otimes (3b) = a \otimes 0 = 0$
	\end{enumerate}
\end{bsp}
\begin{bem}\label{13.5}
	Seien $M,M', N,N'$ $A$-Moduln, $f:M \to M'$, $g:N \to N'$ $A$-Modulhomomorphismen. Dann gibt es genau einen $A$-Modulhomomorphismus 
	$$f\otimes g: M \otimes N \longrightarrow M' \otimes N'$$
	mit $(f \otimes g)(m \otimes n) = f(m) \otimes g(n)$ für alle $m\in M, \, n\in N$.
\end{bem}
\begin{proof}
	Die Abbildung $f\times g:M \times N \to M' \otimes N', \; (m,n) \mapsto f(m) \otimes g(n)$ ist $A$-bilinear. Dann folgt die Behauptung aus der Universellen Eigenschaft des Tensorprodukts.
\end{proof}
\begin{fo}
	Seien $M,N$ $A$-Moduln. Dann sind 
	$$M \otimes_A - : A\text{-Mod} \to A\text{-Mod} \quad \text{und} \quad -\otimes_A N: A\text{-Mod} \to A\text{-Mod}$$
	additive Funktoren. hierbei setzen wir für $N_1, N_2\in A$-Mod, $\phi \in \Hom_A(N_1, N_2)$
	$$(M \otimes_A -)(\phi) : =\id_M\otimes\, \phi : M \otimes N_1 \to M \otimes N_2, \quad m\otimes n \mapsto m \otimes \phi(n)$$
	(analog für $-\otimes_A N$)
\end{fo}\label{13.6}
\begin{proof}
	Offenbar ist $(M \otimes_A -)(\id_N) = \id_M\otimes \id_N = \id_{M \otimes N}$ und für $\phi \in \Hom_A(N_1, N_2)$, $\psi \in \Hom_A(N_2,N_3)$ ist 
	$$(M \otimes_A -)(\psi\circ \phi) = \id_M \otimes(\psi \circ \phi) = (\id_M \otimes \psi)\otimes(\id_M\otimes \phi) = (M \otimes_A-)(\psi) \circ (M \otimes_A -)(\phi)$$
\end{proof}
\begin{bem}\label{13.7}
	Seien $L,M,N$ $A$-Moduln, $(N_i)_{i\in I}$ eine Familie von $A$-Moduln. Dann gibt es natürliche Isomorphismen 
	\begin{enumerate}[label= \alph*)]
		\item $M \otimes_A A \cong A \cong A \otimes_A N$
		\item $N\otimes_A N\cong N \otimes_A M$
		\item $(L\otimes_A M)\otimes_A N \cong L \otimes_A(M \otimes_A N)$
		\item $M \otimes_A \left(\bigoplus_{i\in I} N_i\right) \cong \bigoplus_{i\in I}(M \otimes N_i)$
	\end{enumerate}
\end{bem}
\begin{proof}
	\begin{enumerate}[label= \alph*)]
		\item Die Abbildung $\phi:M \times A \to M, \, (m,a) \mapsto am$ ist $A$-bilinear. Aus der Universellen Eigenschaft erhalten wir einen $A$-Modulhomommorphismus $\alpha:M \otimes_A A \to M$ mit $\alpha(m \otimes a) = am$. Die Abbildung $\beta:M \to M \otimes_A A, \, m \mapsto m \otimes 1$ ist $A$-linear. Es ist 
		\begin{eqnarray*}
		(\beta \circ \alpha)(m \otimes a)& =& \beta(am) = (am) \otimes 1 = m \otimes a\\
		(\alpha \circ \beta)(m) &=& \alpha(m \otimes 1) = 1m = m
		\end{eqnarray*}
	d.h. $\alpha, \beta$ sind invers zueinander, also $M \otimes_AA\cong A$. Für $A$-Modulhomomorphismen $M_1,M_2, \, \phi\in \Hom_A(M_1, M_2)$ kommutiert das Diagramm
	$$\begin{tikzcd}
	M_1 \otimes A \arrow[swap]{d}{\phi\otimes \id_A}\arrow{r}{\alpha_1, \sim}& M_1\arrow{d}{\phi} \\
	M_2 \otimes A \arrow{r}{\alpha_2, \sim} & M_2
	\end{tikzcd}$$
	denn: 
	$$\alpha(\phi\otimes \id_A) (m \otimes a) = \alpha_2(\phi(m) \otimes a) = a\phi(m) = \phi(am) = \phi(\alpha_1(m \otimes a))$$
	\item Die Abbildung $\phi:M \times N \to N \otimes_A M, \, (m,n) \mapsto n \otimes m$ ist $A$-bilinear. Nach der Universellen Eigenschaft erhalten wir einen $A$-Modulhomomorphismus $\alpha:M \otimes_A N \to N \otimes_A M$ mit $\alpha(m \otimes n) = n \otimes m$ für alle $m\in M, \, n\in N$. Analog erhlalten wir einen $A$-Modulhomomorphismus $\beta:M \otimes_A M \to M \otimes_A N$ mit $\beta(n \otimes m) = m \otimes n$ für alle $m\in M, \, n\in N$. Diese sind offenbar invers zueinander. Die Natürlichkeit folgt aus der Kommutativität des Diagramms
	$$\begin{tikzcd}
	M_1 \otimes N_1 \arrow{r}{\alpha_1} \arrow[swap]{d}{\phi \otimes \psi} & N_1 \otimes_A M_1 \arrow{d}{\psi \circ \phi}\\
	M_2 \otimes_A N_2 \arrow{r}{\alpha_2} & N_2  \otimes M_2
	\end{tikzcd}$$
	Rest Übung.
	\end{enumerate}
\end{proof}
\begin{anm}
	Das Tensorprodukt kommutiert im Allgemeinen nicht mit Produkten (Übung).
\end{anm}
\begin{fo}\label{13.8}
	Seien $M,N$ freie $A$-Moduln. Dann ist $M\otimes_A N$ ein freier $A$-Modul.
\end{fo}
\begin{proof}
	Nach Voraussetzung ist $M \cong R^{(I)}  =\bigoplus_{i\in I} A, \, N \cong A^{(J)}$ für geeignete $I,J$. Dann ist 
	$$M \otimes_A N \cong A^{(I)} \otimes_A A^{(J)} = \left( \bigoplus_{i\in I} A\right)\otimes \left(\bigoplus_{j\in J}A\right) = \bigoplus_{I\times J}(A \otimes_A A) \cong \bigoplus_{I\times J}A = A^{(I \times J)}$$
\end{proof}
\begin{bem}\label{13.9}
	Sei $B$ ein kommutativer Ring. $f:A\to B$ ein Ringhomomorphismus, $M$ ein $A$-Modul. Dann wird $B$ ein $A-$Modul vermöge $A\times B \to M, \, (a,b) \mapsto f(a) b$ und $M \otimes_AB$ ist ein $B$-Modul vermöge 
	$$B \times (M \otimes_A B)\to M \otimes_A B\quad(b, \sum_{i=1}^r m_i \otimes b_i)\mapsto \sum_{i=1}^r m_i \otimes b b_i$$
	
\end{bem}
\begin{bem}\label{13.10}
	Sei $B$ ein kommutativer Ring, $M$ ein $A$-Modul, $L$ ein $B$-Modul, $N$ $A$- und $B$-Modul mit $a(b x) = b(ax)$ für alle $a\in A, \, b\in B, \, x\in N$ ("'\define{$N$ ist ein $(A,B)$-Bimodul\index{Bimodul}}"'). Dann ist $M \otimes_AN$ in natürlicher Weise ein $B$-Modul, $M\otimes_BL$ ein $A$-Modul und es ists 
	$$(M \otimes_A N) \otimes_B L \cong M \otimes_A(N \otimes_B L)$$
	ein Isomomorphismus von $A$- und $B$-Moduln.
\end{bem}
\begin{proof}
	Übung.
\end{proof}
\begin{bem}\label{13.11}
	Sei $M$ ein $A$-Modul, $S\subseteq A$ ein Untermonoid bezüglich "'$\cdot$"'. Dann gibt es einen natürlichen Isomorphismus (von $A$- und $S^{-1}A$-Moduln)
	$$S^{-1}A \otimes_AM\cong S^{-1}M$$
\end{bem}
\begin{proof}
	Setze $$\phi:S^{-1}A \times M \to S^{-1} M, \quad  \left(\frac{a}{s}, m\right) \mapsto \frac{am}{s}$$
	$\phi$ ist wohldefniert und $A$-bilinear, d.h. wir erhalten einen $A$-Modulhomomorphismus
	$$\psi: S^{-1}A \otimes_A M \longrightarrow S^{-1} M \quad \text{mit} \quad \psi\left(\frac{a}{s} \otimes m \right) =\frac{am}{s}$$
	für alle $a\in A, \, s\in S,\, m \in M$. Definiere $\delta: S^{-1}M \to S^{-1}A \otimes_AM, \, \frac{m}{s} \mapsto \frac{1}{s} \otimes me $. Dann ist $\delta$ wohldefiniert, denn sei $\frac{m_1}{s_1} =\frac{m_2}{s_2}$. Dann existiert ein $t\in S$ mit $ts_2m_1 = ts_1m_2$, also ist 
	$$\frac{1}{s_1} \otimes m_1 = \frac{1}{ts_2s_1} \otimes ts_2 m_1 = \frac{1}{ts_2s_1} \otimes ts_1 m_2 = \frac{1}{s_2} \otimes m_2$$
	Es ist $\psi \circ \delta = \id_{S^{-1}M}$ und 
	$$(\delta\circ \psi)\left(\frac{a}{s} \otimes m\right)= \delta \left(\frac{am}{s}\right)= \frac{1}{s}\otimes (am) = \frac{a}{s}\otimes m$$
	d.h. $\delta \circ \psi = \id_{S^{-1}A \otimes_A M}$. $\psi$ ist auch ein Homomorphismus von $S^{-1}A$-Moduln. Die Natürlichkeit n $M$ rechnet man leicht nach.	
\end{proof}
\begin{bem}\label{13.12}
	Seiene $M,N$ $A$-Moduln, $S\subseteq A$ ein Untermonoid bezüglich "'$\cdot$"'. Dann gibt es einen natürlichen Isomorphismus von $S^{-1}A$-Moduln 
	$$S^{-1} M \otimes_{S^{-1}M} S^{-1}N \cong S^{-1} (M \otimes_A N)$$
\end{bem}
\begin{proof}
	Übung.
\end{proof}
\begin{bem}\label{13.13}
	Seien $L,M,N$ $A$-Moduln. Dann gilt: 
	$$\Hom_A(M \otimes_A N, L) \cong \Hom_A(M, \Hom_A(N,L))$$
	auf natürliche Weise. Insbesondere ist $-\otimes_AN$ \rotatebox{90}{$\perp$} $\Hom_A(N,-)$. 
\end{bem}
\begin{proof}
	Setze $\text{Bil}_A(M\times N,L):= \{f:M \times N \to L \ | \ f \text{ ist }A\text{-bilinear}\}$. Dann ist $\text{Bil}_A(M \times N,L)$ auf natürliche Weise ein $A$-Modul. Nach Definition des Tensorprodukts ist 
	$$\Hom_A(M \otimes_AN,L) \cong \text{Bil}_A(M \times N,L)$$
	ein Isomorphismus von $A$-Moduln. Definiere 
	\begin{eqnarray*}
		\Phi: \text{Bil}_A(M \times N, L) &\longrightarrow &\Hom_A(M, \Hom_A(N,L))\\
		 \phi &\mapsto& \Phi(\phi): M \to \Hom_A(N,L), \, m \mapsto (N \to L, n \mapsto \phi(m,n))
 	\end{eqnarray*}
 	und 
 	\begin{eqnarray*}
 	\Psi: \Hom_A(M, \Hom_A(N,L)) & \longrightarrow & \text{Bil}_A(M \times N,L) \\
 	\psi &\mapsto& (M \times N \to L, \, (m,n) \mapsto \psi(m)(n) ) 
 	\end{eqnarray*}
 	$\Phi, \Psi$ sind zueinander inverse $A$-Modulhomomorphismen. Also folgt
 	$$\Hom_A(M \otimes_A N,L) \cong \text{Bil}_A(M \times N,L) \cong \Hom_A(M,\Hom_A(N,L))$$
\end{proof}
\begin{fo}\label{13.14}
	Seien $M,N$ $A$-Moduln. Dann sind die Funktoren $M \otimes_A -$ und $-\otimes_A N$ rechtsexakt.
\end{fo}
\begin{proof}
	Wegen $-\otimes_A$ \rotatebox{90}{$\perp$} $\Hom_A(N,-)$ ist $-\otimes_A N$ rechtsexakt nach \ref{5.33}. Nach \ref{13.7} $b)$ ist auch $M \otimes_A -$ rechtsexakt.
\end{proof}
\begin{bsp}
	$-\otimes_A N$ ist im Allgemeinen nicht exakt: Sei $A= \Z$, $N = \QR{\Z}{2 \Z}$. Wir betrachten die Folge 
	$$\begin{tikzcd}
	0 \arrow{r} & \Z \arrow{r}{f} & \Z\arrow{r}{\pi} & \QR{\Z}{2\Z} \arrow{r} & 0
	\end{tikzcd}$$
	wobei $f: \Z \to \Z, \, x\mapsto 2x$ und $\pi$ der kanonischen Projektion.
	Es ist $\Z\otimes_\Z\QR{\Z}{2\Z} \cong \QR{\Z}{2\Z} \neq 0$ und die Abbildung
	$$f\otimes_A \id_N : \Z \otimes_\Z \QR{\Z}{2\Z} \longrightarrow \Z \otimes_\Z \QR{\Z}{2\Z}$$
	ist die Nullabbildung, denn für $x\in \Z, \, y\in \QR{\Z}{2\Z}$ ist 
	$$(f \otimes \id_N)(x \otimes y) = f(x) \otimes y = 2x \otimes y = x \otimes 2y = x \otimes 0 = 0$$
\end{bsp}
\begin{bem}\label{13.16}
	Sei $M$ ein $A$-Modul, $\a\subseteq A$ ein Ideal. Dann gilt:
	$$\QR{A}{\a} \otimes_A M \cong \QR{M}{\a M}$$
\end{bem}
\begin{proof}
	Wir betrachten die exakte Sequenz
	$$\begin{tikzcd}
	0 \arrow{r} & \a \arrow{r}{\iota} & A \arrow{r} & \QR{A}{\a} \arrow{r} & 0 
	\end{tikzcd}$$
	von $A$-Moduln. Anwendung von $-\otimes_AM$ liefert nach \ref{13.14} die exakte Folge 
	$$\begin{tikzcd}
	\a \otimes_A M \arrow{r}{\iota \otimes \id_M} & A\arrow{d}{\psi, \sim} \otimes_AM\arrow{r} & \QR{A }{\a} \otimes_A M \arrow{r} & 0\\
	& M & & 
	\end{tikzcd}$$
	d.h. $\QR{A}{\a} \otimes_AM\cong \coker(\iota\otimes_A \id_M)$. Nach \ref{13.7} $a)$ ist die Abbildung $\psi:A \otimes_A M \to M,\, a \otimes m \mapsto am$ ein $A$-Modulisomorphismus. Es folgt 
	$$\QR{A}{\a} \otimes_A M \cong \coker(\iota\otimes_A \id_M) \cong \coker(\psi\circ (\iota \otimes_A \id_M))$$
	wobei $\psi \circ(\iota\otimes_A \id_M) : \a \otimes_A M \to M, \, \sum a_i \otimes m_i \mapsto \sum a_i m_i$, insbesondere ist $\im(\psi \circ (\iota \otimes_A \id_M)) = \a M$, d.h. $\coker(\psi \circ (\iota \otimes \id_M)) = \QR{M}{\a M}$.
\end{proof}
\begin{df}
	Sei $M$ ein $A$-Modul. Dann heißt $M$  \define{flach} $\defi$ $-\otimes_A M$ ist exakt $\Lra M \otimes_A -$ ist exakt.
\end{df} 
\begin{bem} \label{13.18}
	Sei $P$ ein projektiver $A$-Modul. Dann ist $P$ flach. 
\end{bem}
\begin{proof}
	Nach \ref{6.3} existiert eine Menge $I$, ein $A$-Modul $Q$ mit $ P \oplus Q \cong A^{(I)}$. Nach \ref{13.14} genügt es zu zeigen: $\begin{tikzcd}
	0 \arrow{r} & M' \arrow{r}{f} & M \end{tikzcd}$ exakte Folge von $A$-Moduln $\Ra \begin{tikzcd}
	0 \arrow{r} & M^{'}\otimes_A P \arrow{r}{f \otimes id_P} & M \otimes_A P \end{tikzcd}$ ist exakt. \\
	Sei $\begin{tikzcd} 0 \arrow{r} & M' \arrow{r}{f} & M \end{tikzcd}$ exakt. Wir erhalten kommutatives Diagramm mit exakten Zeilen.
		$$\begin{tikzcd}[column sep = huge]
	0 \arrow{r} & \bigoplus_{i \in I} M^{'} \arrow[swap]{d}{\cong}\arrow{r}{\oplus f}& \bigoplus_{i \in I} M \arrow{d}{\cong} \\
	0 \arrow{r} & M^{'} \otimes_A \bigoplus_{i \in I} A \arrow[swap]{d}{\cong} \arrow{r}{ f \otimes id_{A^{(I)}}} & 	M \otimes_A \bigoplus_{i \in I} A \arrow[swap]{d}{\cong} \\
	0 \arrow{r} & M^{'} \otimes_A P \oplus Q \arrow[swap]{d}{\cong} \arrow{r}{ f \otimes (id_p \oplus id_Q) } & 	M \otimes_A P \oplus Q \arrow[swap]{d}{\cong}\\
	0 \arrow{r} & (M^{'} \otimes_A P) \oplus ( M^{'} \otimes_A Q) \arrow{r}{ (f \otimes id_p) \oplus (f \otimes id_Q) } & 	(M \otimes_A P) \oplus (M \otimes Q) \\
	\end{tikzcd}$$
	Woraus folgt dass $\begin{tikzcd}
	0 \arrow{r} & M^{'}\otimes_A P \arrow{r}{f \otimes id_P} & M \otimes_A P \end{tikzcd}$ exakt ist.
\end{proof}
\begin{bem} \label{13.19}
	Seien $M,N $ flache $A$-Moduln. Dann ist $ M \otimes_A N $ flach.
\end{bem}
\begin{proof}
	Sei $\begin{tikzcd}
	0 \arrow{r} & L' \arrow{r} & L \end{tikzcd}$ eine exakte Sequenz von $A$-Moduln \\
	Da $M$ flach ist folgt: $\begin{tikzcd}	0 \arrow{r} & L' \otimes_A M \arrow{r} & L \otimes_A M \end{tikzcd}$ ist exakt \\
	Da $N$ flach ist, folgt: 
	$\begin{tikzcd}	0 \arrow{r} & (L' \otimes_A M) \otimes_A N\arrow{r} & (L \otimes_A M) \otimes_A N \end{tikzcd}$ ist exakt \\
	Und mit \ref{13.7} schließlich dass
	$\begin{tikzcd}	0 \arrow{r} & L' \otimes_A (M \otimes_A N) \arrow{r} & L \otimes_A( M \otimes_A N) \end{tikzcd}$ exakt ist.
	
\end{proof}
\begin{bem} \label{13.20}
	Sei $(M_i)_{i \in I } $eine Familie von $A$-Moduln. Dann sind äquivalent: 
	\begin{enumerate} [label= \roman*)]
		\item $\bigoplus_{i \in I} M_i $ flach
		\item $M_i $ flach für alle $i \in I$.
	\end{enumerate}
\end{bem}
\begin{proof}
	Sei $\begin{tikzcd} 0 \arrow{r} & N' \arrow{r} & N \end{tikzcd}$. Dann ist \\
	\begin{eqnarray*}
	& &	\begin{tikzcd}
	0 \arrow{r} & N^{'}\otimes_A (\bigoplus_{i \in I} M_i) \arrow{r} & N \otimes_A (\bigoplus_{i \in I} M_i) \end{tikzcd} \text{ exakt} \\
	&\overset{13.7}{\Lra}& \begin{tikzcd}
	0 \arrow{r} & \bigoplus_{i \in I} (N^{'}\otimes_A M_i) \arrow{r} & \bigoplus_{i \in I} (N^{}\otimes_A M_i) \end{tikzcd} \text{ exakt}\\
	&\Lra& \begin{tikzcd} 0 \arrow{r} & N' \otimes_A M_i \arrow{r} & N \otimes_A M_i \end{tikzcd} \text{ exakt für alle }i \in I
\end{eqnarray*}
\end{proof}
\begin{bem} \label{13.21}
	Sei $B$ ein kommutativer Ring, $f: A \to B $ ein Ringhomomorphismus, $M$ ein flacher $A$-Modul. Dann ist $ B \otimes_A M $ ein flacher $B$-Modul. 
\end{bem}
\begin{proof}
	Übungsaufgabe.
\end{proof}
\begin{bem} \label{13.22}
	Sei $S \subseteq A $ ein Untermonoid bezüglich $ "\cdot " $. Dann ist $S^{-1}A $ ein flacher $A$-Modul. 
\end{bem}
\begin{proof}
	Sei $\begin{tikzcd} 0 \arrow{r} & M' \arrow{r} & M \end{tikzcd}$ eine exakte Folge von $A$-Moduln. Wir erhalten kommutatives Diagramm mit exakten Zeilen: 
	$$\begin{tikzcd}
	0 \arrow{r} &S^{-1}M' \arrow[swap]{d}{\sim}\arrow{r} &  S^{-1}M \arrow{d}{\sim} \\
0 \arrow{r} & 	S^{-1}A \otimes_A M^{'} \arrow{r} & S^{-1}A \otimes_A M
	\end{tikzcd}$$
	(Beachte: $S^{-1}-$ ist exakt nach \ref{12.8})
\end{proof}
\begin{anm}
	$A$ nullteilerfrei $\Ra \Quot A $ flacher Modul.
\end{anm}
\begin{bem} \label{13.23}
	Sei $M$ ein $A$-Modul. Dann sind äquivalent: 
	\begin{enumerate} [label= \roman*)]
		\item $M$ ist ein flacher $A$-Modul 
		\item $M_{\p} $ ist ein flacher $A_{\p}$-Modul für alle Primideale $\p \subseteq A$
		\item $M_{\m}$ ist ein flacher $A_{\m}$-Modul für alle maximalen Ideale $\m \subseteq A$. 
		
	\end{enumerate}
\end{bem}
\begin{proof}
	$(i) \Ra(ii) $ folgt wegen $M_{\p} \cong M \otimes_A A_{\p} $ aus \ref{13.21} \\
	$(ii) \Ra(iii) $ trivial.\\
	$(iii) \Ra(i) $ Sei $\begin{tikzcd} 0 \arrow{r} & N' \arrow{r} & N \end{tikzcd}$ eine exakte Folge von $A$-Moduln. Mit \ref{12.15} folgt  $\begin{tikzcd} 0 \arrow{r} & N_{\m}^{'} \arrow{r} & N_{\m} \end{tikzcd}$ ist eine exakte Sequenz von $A_{\m}$-Moduln für alle maximalen Ideale $\m \subseteq A $. mit $(iii)$ folgt  $\begin{tikzcd} 0 \arrow{r} & N_{\m}^{'} \otimes_A M_{\m} \arrow{r} & N_{\m} \otimes_A M_{\m} \end{tikzcd}$
	ist eine exakte Sequenz von $A_{\m}$-Moduln für alle maximalen Ideale $\m \subseteq A $. Das heißt $\begin{tikzcd} 0 \arrow{r} & (N^{'} \otimes_A M)_{\m} \arrow{r} & ( N \otimes_A M)_{\m} \end{tikzcd}$ ist eine exakte Sequenz von $A_{\m}$-Moduln für alle maximalen Ideale $\m \subseteq A $. Mit \ref{12.15} ist dann $\begin{tikzcd} 0 \arrow{r} & N^{'} \otimes_A M \arrow{r} & N \otimes_A M \end{tikzcd}$ eine exakte folge von $A$-Moduln. 
\end{proof}
\begin{anm}
	Erinnerung an LA2 (29.15): Sei $M$ ein $A$-Modul. $$ T(M) := \{ x \in M \ | \ \exists a \in A, a \text{ kein Nullteiler mit } ax = 0 \} $$ ist das \define{Torsionsmodul von $M$\index{Torsionsmodul}}.	$M$ heißt \define{torsionsfrei\index{torsionsfrei}} $\defi T(M) = \{0\}$
\end{anm}
\begin{bem} \label{13.24}
	Sei $A$ nullteilerfrei, $M$ ein flacher $A$-Modul. Dann ist $M$ torsionsfrei. 
\end{bem}
\begin{proof}
	Setze $K := \Quot A$ Dann folgt $\begin{tikzcd} 0 \arrow{r} & A \arrow{r} & K \end{tikzcd}$ ist eine exakte Folge von $A$-Moduln. Aus der Flachheit von $M$ folgt $\begin{tikzcd} 0 \arrow{r} & A  \otimes_A M \arrow{r} & K \otimes_A M \end{tikzcd}$ exakt. $K \otimes_A M $ ist ein $K$-Vektorraum und somit torsionsfrei als $K$-Vektorraum und auch als $A$-Modul. Daraus folgt, dass $M$ torsionsfrei als $A$-Modul ist.
\end{proof}
\begin{bem+df} \label{13.25}
	Sei $M$ ein $A$-Modul. Dann sind äquivalent: 
	\begin{enumerate} [label= \roman*)]
		\item Für jede Sequenz $\begin{tikzcd} N^{'} \arrow{r} & N \arrow{r} & N^{''} \end{tikzcd}$ von $A$-Moduln gilt: \\
		$$ \begin{tikzcd}[column sep = small] N^{'} \arrow{r} & N \arrow{r} & N^{''} \end{tikzcd} \text{exakt} \Lra \begin{tikzcd}[column sep = small] N^{'} \otimes_A M \arrow{r} & N \otimes_A M \arrow{r} & N^{''} \otimes_A M \end{tikzcd} \text{exakt} $$
		\item $M$ ist flach und für alle maximalen Ideale $\m \subseteq A $ ist $\QR{M}{\m M} \neq 0 $.
		\item $M$ ist flach und für alle $A$-Moduln $N$ gilt: $N \otimes_A M = 0 \Ra N = 0 $.
		\item $M$ ist flach und für alle $A$-Modulhomomorphismen $\phi: N_1 \to N_2 $ gilt: 
		$$ \phi \otimes_A id_M : N_1 \otimes_A M \to N_2 \otimes_A M = 0 \Ra \phi = 0 $$ 
		Ist eine dieser äquivalenten Bedingungen erfüllt so heißt $M$ ein \define{treuflacher\index{treuflacher Modul}} $A$-Modul. 
	\end{enumerate}
\end{bem+df}
\begin{proof}
	$(i) \Ra (ii) $	Dass $M$ flach ist, ist trivial. Sei also $\m \subseteq A $ ein maximales Ideal, dann erhält man die exakte Sequenz $\begin{tikzcd} 0 \arrow{r} & \m \arrow{r} & A \arrow{r} & \QR{A}{\m} \arrow{r} & 0 \end{tikzcd}$ von $A$-Moduln. mit (i) und unter Anwendung von $- \otimes_A M $ erhalten wir dass $$\begin{tikzcd} 0 \arrow{r} & \m \otimes_A M \arrow{r} & A \otimes_A M \arrow{r} & \QR{A}{\m} \otimes_A M \arrow{r} & 0 \end{tikzcd}$$ exakt ist. 
	Nach \ref{13.16} gilt außerdem $\QR{A}{\m} \otimes_A M \cong \QR{M}{\m M}$. Angenommen $\QR{M}{\m M} = 0$. Dann wäre $$\begin{tikzcd} 0 \arrow{r} & \m \otimes_A M \arrow{r} & A \otimes_A M \arrow{r} & 0 \end{tikzcd}$$
	exakt und mit (i) wäre dann auch $\begin{tikzcd} 0 \arrow{r} & \m \arrow{r} & A \arrow{r} &  0 \end{tikzcd}$ exakt, Widerspruch!  \\
	$(ii) \Ra (iii) $ Sei $N$ ein $A$-Modul, $N \neq 0$. Dann existiert ein $x \in N,\, x \neq 0$, das heißt $\ann_A(x) \subsetneq A $. Dann existiert ein maximales Ideal $\m \in A $  mit $\ann_A(x) \subseteq \m $. Man erhält einen Epimorphismus von $A$-Moduln 
	$$f: Ax \longrightarrow \QR{A}{\ann_A(x)} \longrightarrow \QR{A}{\m}$$
	woraus $$ f \otimes_A id_M: Ax \otimes_A M \to  \QR{A}{\m} \otimes_A M \cong \QR{M}{\m M } \neq 0$$ folgt. Damit ist dann $Ax \otimes_A M \neq 0 $. Die Sequenz $\begin{tikzcd} 0 \arrow{r} & Ax \arrow{r} & N   \end{tikzcd}$ ist exakt, da wegen $M$ flach auch $\begin{tikzcd} 0 \arrow{r} & Ax \otimes_A M  \arrow{r} & N \otimes_A M \end{tikzcd}$ exakt ist. Somit: $N \otimes_a M \neq 0 $. \\
	$(iii) \Ra (iv) $ Sei $\phi: N_1 \to N_2 $ $A$-linear und $\phi \otimes \id_M: N_1 \otimes_A M \to N_2 \otimes_A M $ sei die Nullabbildung. Setze $U := \im \phi $. So erhalten wie die Faktorisierung $\phi: N_1 \to U \to N_2$. Dann ist $\phi|^{U} \otimes_A id_M $ ist surjektiv, $\iota \otimes_A id_M $ ist injektiv, da $M$ flach ist. Außerdem ist
	$$(\iota \otimes_A id_M) \circ (\phi|^{U} \otimes_A id_M) = \phi \otimes id_M = 0$$
	Aus der Injektivität von $\iota \otimes_A id_M $  folgt $\phi|^{U} \otimes_A id_M = 0 $ und die Surjektivität von $\phi|^{U} \otimes_A id_M = 0 $ impliziert $U \otimes_A M =  0 $ und mit (iii) folgt $U = 0 $, das heißt $\phi = 0.$ \\
	$(iv) \Ra (iii) $ Sei $N$ ein $A$-Modul mit $N \otimes_A M = 0 \Ra id_N \otimes_A id_M: N \otimes_AM \to N \otimes_A M $ ist die Nullabildung. Dann folgt mit (iv) $id_N = 0 \Ra N = 0 $. \\
	$(iii) \Ra (i) $ Sei $\begin{tikzcd} N^{'} \arrow{r} & N \arrow{r} & N^{''} \end{tikzcd}$ eine Sequenz von $A$-Moduln. Zu zeigen ist: 
	$$\begin{tikzcd} N^{'} \arrow{r}{f} & N \arrow{r}{g} & N^{''} \end{tikzcd} \text{ exakt }\Lra \begin{tikzcd} N^{'} \otimes_A M  \arrow{r}{f \otimes id_M} & N \otimes_A M  \arrow{r}{g \otimes id_M} & N^{''} \otimes_A M  \end{tikzcd} \text {exakt}$$
	$"\Ra "$ folgt aus der Flachheit von $M$. \\
	Für $"\Leftarrow "$ ist zu zeigen $ \im f = \ker g $ \\
	$"\subseteq " $ Es ist $(g \circ f) \otimes_A id_M = (g \otimes_A id_M) \circ (f \otimes_A id_M ) = 0$  mit (iv) folgt $g \circ f = 0 $. \\
	$"\supseteq " $ Wir betrachten die exakten Sequenzen \begin{eqnarray*}
		&&\begin{tikzcd} N^{'} \arrow{r}{f|^{\im f}} & \im f \arrow{r} & 0 \end{tikzcd}\\
		&&\begin{tikzcd} 0 \arrow{r}  & \im f \arrow{r}{\iota_1} & \ker g \arrow{r} & \QR{\ker g}{\im f} \arrow{r} & 0 \end{tikzcd} \\
		& &\begin{tikzcd} 0 \arrow{r}  & \ker g \arrow{r}{\iota_2} & N \arrow{r}{g|^{\im g}} & \im g \arrow{r} & 0 \end{tikzcd}
	\end{eqnarray*}
	Es ist \begin{eqnarray*}
		\im ((\iota_a \otimes_A id_M) \circ (\iota_i \otimes_A id_M) \circ (f|^{\im f} \otimes_A id_M )) &=& \im(f \otimes_A id_M) = \ker(g \otimes_A id_M) \\
		&=& \ker(g|^{\im g} \otimes_A  id_M) = \im(\iota_2 \otimes_A id_M)
	\end{eqnarray*}
	wobei die letze Gleichheit aus der Flachheit von $M$ folgt. Wegen $M$ flach, ist $\iota_2 \otimes id_M $ injektiv, woraus $$\im ((\iota_1 \otimes id_M) \circ (f|^{\im f} \otimes id_M)) = \ker g \otimes_A M$$ folgt, also 
	$(\iota_1 \otimes id_M ) \circ (f|^{\im f} \otimes id_M) $ surjektiv.
	Damit ist auch $\iota_1 \otimes id_M $ surjektiv. Da $M$ flach ist, erhalten wir die exakte Sequenz $$ \begin{tikzcd} 0 \arrow{r}  & \im f \otimes_A M \arrow{r}{\iota_1 \otimes id_M } & \ker g \otimes_A M \arrow{r} & (\QR{\ker g}{\im f}) \otimes_A M \arrow{r} & 0 \end{tikzcd}$$
	 Daraus resultiert schließlich
	 $$\left(\QR{\ker g}{\im f}\right) \otimes_A M = 0$$ und mit (ii) folgt, dass $\QR{\ker g}{\im f} = 0$, d.h. $\ker g = \im f $.
\end{proof}
\begin{bsp}
	\begin{enumerate} [label= \alph*)]
		\item $\Q$ ist flacher $\Z$-Modul nach \ref{13.22}, aber kein treuflacher $\Z$-Modul, denn $\Q \otimes_{\Z} \QR{\Z}{2\Z} = 0 $
		\item $A^{(I)}$ ist ein treuflacher $A$-Modul für $I \neq \emptyset $.Denn: \\
		$A^{(I)} $ ist flach, da freier $A$-Modul \\
		Sei $N$ $A$-Modul mit $ N \otimes_A A^{(I)} = 0 \Ra \bigoplus_{i\in I} N = 0 \Ra N = 0$ \\
		Insbesondere ist $A[X] \cong A^{(\N_0)} $ ein treuflacher $A$-Modul. 
	\end{enumerate}
\end{bsp}
\newpage
\subsection{Tor}
\begin{df}\label{14.1}
	Seien $M,N$ $A$-Moduln. Wir setzen $$\text{Tor}_n^A(M,N)\index{Tor} := L_n(M \otimes_A -)(N) \quad \text{für} \quad n\geq 0$$
	Explizit: Wähle eine projektive Auflösung $Q_ \bullet \to N$, dann ist $\Tor_n^A(M,N) = \HH_n(M \otimes_A Q_\bullet)$
\end{df}
\begin{sa}\label{14.2}
	Sei $M$ ein $A$-Modul. Dann ist $(\Tor_n^A(M,-))_{n\geq 0}$ ein universeller $\delta$-Funktor, d.h.
	\begin{itemize}
		\item $\Tor_n^A(M,-): A$-Mod $\to A$-Mod sind additive Funktoren für alle $n\geq 0$
		\item Für jede exakte Folge $\begin{tikzcd}
		0 \arrow{r} & N' \arrow{r} & N \arrow{r} & N'' \arrow{r} & 0
		\end{tikzcd}$ gibt es Verbindungshomomorphismen $\delta:\Tor_{n+1}^A(M,N'') \to \Tor_n^A(M,N)$, sodass die lange Folge 
		$$\begin{tikzcd}[column sep = small]
		 \ldots \arrow{r} & \Tor_{n+1}^A(M,N'') \arrow{r}{\delta} & \Tor_n^A(M,N')\arrow[d, phantom, ""{coordinate, name=Z}] \arrow{r} & \Tor_n^A(M,N) \arrow[dll,
		 "\delta",
		 rounded corners,
		 to path=
		 { -- ([xshift=2ex]\tikztostart.east)
		 	|- (Z) [near end]\tikztonodes
		 	-| ([xshift=-2ex]\tikztotarget.west)
		 	-- (\tikztotarget)}
		 ]\\
	 & \Tor_n^A(M,N'') \arrow{r}{\delta} & \Tor_{n-1}^A(M,N') \arrow{r} & \ldots 
		\end{tikzcd}$$

		exakt ist, $\delta$ funktoriell (vgl. \ref{9.1}).
		\item Für jeden homologischen $\delta$-Funktor $H'=(H_n')_{n\geq 0}: A$-Mod $ \to A$-Mod setzt sich jede natürliche Transformation $f_0 : M \otimes_A - \Ra H_0'$ eindeutig zu einem Homomorphismus von homologichen $\delta$-Funktoren fortsetzt.
	\end{itemize}
\end{sa}
\begin{proof}
	Analog zu Kapitel 2.
\end{proof}
\begin{sa}\label{14.3}
	Seien $M,N$ $A$-Moduln. Dann gibt es einen kanonischen Isomorphimus 
	$$\Tor_n^A(M,N) \cong L_n(- \otimes_A N)(M) \quad \text{für alle} \quad n\geq 0$$
	insbesondere kann $\Tor_n^A(M,N)$ auch über eine projektive Auflösung $P_\bullet\to M$ von $M$ berechnet werden via $\Tor_n^A(M,N) = \HH_n (P_\bullet \otimes_A N)$.
\end{sa}
\begin{proof}
	Analog zum Beweis von \ref{10.2}, verwende hierbei, dass projektive Moduln flach sind.
\end{proof}
\begin{fo}\label{14.4}
	Sei $M$ ein flacher $A$-Modul, $N$ ein $A$-Modul. Dann ist $M$ $(-\otimes_A N)$-azyklisch.
\end{fo}
\begin{proof}
	Es ist $$L_n(- \otimes_A N)(M) \underset{\ref{14.3}}{\cong} \Tor_n^A(M,N) = L_n(M \otimes_A -)(N)$$
	Da $M$ flach ist, ist $M \otimes_A -$ exakt, d.h. $L_n(M \otimes_A -) = 0$ für $n\geq 1$, also $L_n(- \otimes_AN)(M) = 0$ für $n\geq 1$.
\end{proof}
\begin{fo}\label{14.5}
	Seien $M,N$ $A$-Moduln. Dann gilt: 
	$$\Tor_n^A(M,N) \cong \Tor_n^A(N,M) \quad \text{für alle}\quad n\geq 0$$
\end{fo}
\begin{proof}
	Sei $P_\bullet\to M$ eine projektive Auflösung von $M$. Es ist 
	\begin{eqnarray*}
	\Tor_n^A(M,N) &=& L_n(M \otimes_A-)(N) \underset{\ref{14.3}}{\cong} L_n(- \otimes_A N)(M) = \HH_n(P_\bullet \otimes_AN) = \HH_n(N \otimes_AP_\bullet )\\
	&=& L_N(N \otimes_A-)(M) = \Tor_n^A(N,M)
	\end{eqnarray*}
\end{proof}
\begin{bem}\label{14.6}
	Sei $\begin{tikzcd}
	0 \arrow{r} & M' \arrow{r} & M \arrow{r} & M'' \arrow{r} & 0
	\end{tikzcd}$ eine exakte Folge von $A$-Moduln, $M''$ flach, $N$ ein $A$-Modul. Dann ist die Folge
	$$\begin{tikzcd}
	0 \arrow{r} & M' \otimes_AN\arrow{r} & M \otimes_AN\arrow{r} & M'' \otimes_AN\arrow{r} & 0
	\end{tikzcd}$$
	exakt.
\end{bem}
\begin{proof}
	Nach \ref{14.2} erhalten wir eine exakte Folge 
	$$\begin{tikzcd}
	\Tor_n^A(M'',N) \arrow{r} & M' \otimes_A N \arrow{r} & M \otimes_A N \arrow{r} & M'' \otimes_AN\arrow{r} & 0
	\end{tikzcd}$$
	Da $M''$ flach ist, ist $\Tor_1^A(M'', N) = 0$ nach \ref{14.4}.
\end{proof}
\begin{sa}\label{14.7}
	Sei $A$ ein lokaler Ring mit maximalem Ideal $\m$ und Restklassenkörper $\QR{A}{\m}$, $M$ ein endlich erzeugter $A$-Modul. Dann sind äquivalent:
	\begin{enumerate}[label= \roman*)]
		\item $M$ ist frei
		\item $M$ ist projektiv
		\item $M$ ist flach
		\item $\Tor_1^A(\QR{A}{\a}, M) =0$ für jedes Ideal $\a\subseteq A$.
	\end{enumerate}
Ist $A$ noethersch, dann sind $i) -iv)$ äquivalent zu:
\begin{enumerate}
	\item[v)] $\Tor_1^A(k,M) = 0$ 
\end{enumerate}
\end{sa}
\begin{proof}
	$i)\Ra i))$ klar, $ii) \Ra iii)$ aus \ref{13.18}, $iii)\Ra iv)$ aus \ref{14.4}, $iv) \Ra v)$ klar.\\
	$iv)\Ra i)$ (bzw. $v) \Ra i)$)
	\begin{enumerate}
		\item Seien $x_1, \ldots, x_n\in M$, sodass die Restklassen $\bar x_1 , \ldots, \bar x_n$ in $k$ eine $k$-Basis von $\QR{M}{\m M}$ bilden. Das Nakayama-Lemma liefert, dass $x_1, \ldots, x_n\in M$ bereits ein Erzeugendensystem von $M$ sind. Setze $F:= A^n, \, \phi: F\to M, \, e_i \mapsto x_i$. $E:= \ker \phi$, erhalte also ein exakte Sequenz
		\begin{equation}\tag{$\ast$}
		\begin{tikzcd}
		0\arrow{r} & E\arrow{r} & F \arrow{r}{\phi} & M \arrow{r} & 0
		\end{tikzcd}
		\end{equation}
		Anwendung von $-\otimes_A k$ liefert die exakte Folge 
		$$\begin{tikzcd}
		0 \overset{iv)}{=} \Tor_1^A(k,M) \arrow{r} & k \otimes_A E \arrow{r} & k \otimes_A F \arrow{r}{\id_k\otimes \phi} & k \otimes_A M \arrow{r} & 0
		\end{tikzcd}$$
		Ferner gilt:
		\begin{eqnarray*}
		\dim_k(k\otimes_A M) &=& \dim_k\left(\QR{A}{\m} \otimes_AM\right) = \dim_k\left(\QR{M}{\m M}\right) = n = \dim_k(k^n)\\
		& = &\dim_k(k \otimes_A A^n) = \dim_k(k \otimes_A F)
		\end{eqnarray*}
		Also ist $\id_k \otimes \phi$ ein Isomorphismus, d.h. $k\otimes_A E = 0$, also $\QR{A}{\m}\otimes_A E = 0$ und damit $\QR{E}{\m E} =0$. Ist $A$ noethersch, dann ist $E$ endlich erzeugt und nach dem Nakayama-Lemma folgt, dass $E=0$, also $M\cong F$, d.h. $M$ ist frei, woraus $v) \Ra i)$ folgt.
		\item Sei $x= a_1 e_a + \ldots + a_n e_n\in E\subseteq F$. Setze $\a_x:= a_1 A + \ldots + a_n A$ (ist ein endlich erzeugtes Ideal in $A$.) Wir wollen einsehen. das $\a_x=0$ ist. Tensoriere $(\ast)$ mit $\QR{A}{\a_x}$ und erhalte die exakte Folge:
		$$\begin{tikzcd}[column sep = small]
		0 \underset{iv)}{=} \Tor_1^A\left( \QR{A}{\a_x}, M\right)\arrow{r} & \QR{A}{\a_x}\otimes_A E \arrow{d}{\sim} \arrow{r} & \QR{A}{\a_x} \otimes_A F \arrow{r}  \arrow{d}{\sim} & \QR{A}{\a_x} \otimes_M M \arrow{r} & 0\\
		& \QR{E}{\a_x E} \arrow[hook]{r} & \QR{F}{\a_x F} & &
		\end{tikzcd}$$
		Da $x\in E \cap F$ ist $x\in \a_XE= \a_x \m E \subseteq \a_x \m F$. Damit ist $x= \sum a_i' b_i$ mit $a_i' \in \a_x \m,\, b_i \in F$, also ist $x= \sum_i \tilde{a}_i e_i$ mit $\tilde{a}_i \in \a_x \m$. Also lieft $a_i \in \a_x \m $ für alle $i=1,\ldots, $, das heißt $\a_x \subseteq \a_x \m \subseteq \a_x$, woraus schließlich $\a_x = \a_x \m$ folgt. Anwendung des Nakayama-Lemmas liefert also $\a_x=0$, also $x=0$, womit $E = \ker \phi =0$, also $M \cong F$, also ist $M$ frei.
	\end{enumerate}
\end{proof}
\begin{fo}\label{14.8}
	Sei $M$ ein endlich erzeugter $A$-Modul. Dann sind äquivalent:
	\begin{enumerate}[label = \roman*)]
		\item $M$ ist ein flacher $A$-Modul
		\item $M_\p$ ist ein freier $A_\p$-Modul für alle Primideale $\p\subseteq A$.
		\item $M_\m$ ist ein freier $A_\m$-Modul für alle maximalen Ideale $\m\subseteq A$.
	\end{enumerate}
\end{fo}
\begin{proof}
	Flachheit ist eine lokale Eigenschaft nach \ref{13.24}. Damit folgt die Behauptung aus \ref{14.7}.
\end{proof}
\begin{sa}\label{14.9}
	Sei $A$ ein Hauptidealring, $M,N$ seien $A$-Moduln. Dann ist $\Tor_n^A(M,N) = 0$ für $n\geq 2$.
\end{sa}
\begin{proof}
	Es existiert ein freier $A$-Modul $F_0$ und ein Epimorphismus $\epsilon:F_0 \twoheadrightarrow N$. Setze $F_1:= \ker \epsilon \subseteq F_0$. Da $A$ ein Hauptidealring ist, ist $F_1$ frei und 
	$$\begin{tikzcd}
	(0 \arrow{r} & F_1 \arrow{r} & F_0) \arrow{r}{\epsilon} & N
	\end{tikzcd}$$
	eine projektive Auflösung von $N$. Für $\Tor$ folgt damit:
	$$\Tor_n^A(M,N) = \HH_n(M \otimes F_0) = 0\quad \text{für} \quad n\geq 2$$
\end{proof}
\begin{bem}\label{14.10}
	Sei $M$ ein $A$-Modul, $a\in A$ kein Nullteiler. Dann gilt:
	$$\Tor_1^A\left( \QR{A}{(a)} , M \right) \cong \{x\in M \ | \ ax=0\}$$
\end{bem}
\begin{proof}
	Setze $\phi_a:A \to A, \, b \mapsto ab$. Da $a$ kein Nullteiler ist, ist $\phi_a$ injekitv. Erhalte also eine exakte Folge
	$$\begin{tikzcd}
	0 \arrow{r} & A \arrow{r}{\phi_a} & A \arrow{r} & \QR{A}{(a)} \arrow{r} & 0
	\end{tikzcd}$$
	Tensorieren mit $M$ liefert die exakte Folge
	$$\begin{tikzcd}[column sep = small]
	0=\Tor_1^A(A,M) \arrow{r} & \Tor_1^A\left( \QR{A}{(a)}, M\right)\arrow{r} & A \otimes_A M \arrow{d}{\sim} \arrow{r}{\phi_a \otimes \id_M} & \arrow{d}{\sim} A \otimes_A M \arrow{r} & \QR{A}{(a)} \otimes_AM\arrow{r} & 0\\
	& & M \arrow{r}{x\mapsto ax} & M & &
	\end{tikzcd}$$
	Also ist $\Tor_1^A\left(\QR{A}{(a)}, M\right)\cong \ker(\phi_a \otimes \id_M) \cong \{x\in M \ | \ ax=0 \}$.
\end{proof}
\newpage
\subsection{Ganze Ringerweiterungen und Dimension}
\begin{center}
	\textbf{In diesem Abschnitt bedeute "'Ringerweiterung"' stets Erweiterung kommutativer Ringe}
\end{center}
\begin{df}
	Sei $B|A$ eine Ringerweiterung.
	\begin{enumerate}
		\item[] $B|A$ heißt \emph{endlich\index{endliche Ringerweiterung}} $\defi B$ ist endlich erzeugt als $A$-Modul
		\item[] $b\in B$ heißt \emph{ganz\index{ganze Ringerweiterung}} über $A \defi A[b]|A$ ist endlich
		\item[] $B|A$ heißt \emph{ganz} $\defi$ Alle $b\in B$ sind ganz über $A$.
	\end{enumerate}
\end{df}
\begin{anm}
	Seien $B|A, \, C|B$ endliche Ringerweiterungen. Dann ist $C|A$ eine endliche Ringerweiterung, denn ist $(b_i)_{i=1, \ldots, n}$ ein Erzeugendensystem von $B$ als $A$-Modul, $(c_j)_{j=1, \ldots, m}$ ein Erzeugendensystem von $C$ als $B$-Modul. Dann ist $(b_ic_j)_{i=1, \ldots, n\atop j=1,\ldots, m}$ ein Erzeugendensystem von $C$ als $A$-Modul.
\end{anm}
\begin{sa}\label{15.2}
	Sei $B|A$ eine Ringerweiterung, $b\in B$. Dann sind äquivalent:
	\begin{enumerate}[label= \roman*)]
		\item $b$ ist ganz über $A$
		\item ES gibt ein $n\in \N$, $a_{n-1}, \ldots, a_0\in A$ mit 
		\begin{equation}\tag{$\ast$}
		b^n + a_{n-1}b^{n-1} + \ldots + a_1 b + a_0 =0
		\end{equation}
		$(\ast)$ heißt eine \define{Ganzheitsgleichung\index{Ganzheitsgleichung}} für $b$.
		\item Es gibt eine Zwischenring $A\subseteq Z\subseteq B$, sodass $b\in Z$ ist und $Z|A$ endlich ist.
		\item Es gibt einen $A[b]$-Modul $M$ mit $\ann_{A[b]} M =0$, der als $A$-Modul endlich erzeugt ist.
	\end{enumerate}
\end{sa}
\begin{proof}
	$i)\Ra iii)$ Ist $b$ ganz über $A$. Dann ist $A[b]|A$ endlich. Setze $Z:= A[b]$.\\
	$iii)\Ra iv)$ Setze $M:= Z$. Dann ist $M$ in natürlicher Weise ein $A[b] \subseteq Z$-Modul. Es gilt: $x\in \ann_{A[b]}Z \Ra xZ =0$ und wegen $1\in Z$ ist $x=0$, also $\ann_{A[b]} M =0$. Wegen $Z|A$ endlich, ist $M$ endlich erzeugt als $A$-Modul.\\
	$iv)\Ra ii)$ Setze $\phi:M \to M,\, x\mapsto bx$. Dann ist $\phi$ offenbar ein $A$-Modulhomomorphismus und wegen \ref{11.14} mit $\a = A$ folgt die Existenz von $a_0, \ldots, a_{n-1}\in A$ mit 
	$$\phi^n + a_{n-1}\phi^{n-1} + \ldots + a_1 \phi + a_0 \id_M= 0$$
	Für alle $x\in M$ ist dann 
	$$(\underbrace{b^n + a_{n-1} b^{n-1} + \ldots + a_1 b + a_0}_{\in \ann_{A[b]}M=0})x=0$$
	Als ist $b^n + \ldots + a_0 =0$.\\
	$ii)\Ra i)$ Sei $b^n + a_{n-1}b^{n-1} + \ldots + a_0=0$. Dann ist $1, b,\ldots, b^{n-1}$ ein Erzeugendensystem von $A[b]$ als $A$-Modul, denn: Sei $c\in A[b]$, etwa $c= \alpha_0 + \alpha_1 b + \ldots + \alpha_sb^s$ mit $\alpha_0, \ldots, \alpha_s\in A$. Setze $h:= \sum_{i=0}^s \alpha_i T^i\in A[T]$, $f:=\sum_{i=0}^n a_i T^i$ ($a_n:= 1$). Da $f$ normiert ist, existieren $q,r\in A[T]$ mit $h=qf+r$ und $\deg r < \deg f$. Dann ist 
	$$c=h(b) = q(b) \underbrace{f(b)}_{=0} + r(b) = r(b) \in \sum_{i=0}^{n-1} Ab^i$$
	
\end{proof}
\begin{anm}
	Ist $B|A$ eine Körpererweiterung, dann gilt:
	\begin{eqnarray*}
	b\in B \text{ ist ganz über } A & \Lra & b\text{ ist algebraisch über } A\\
	B|A \text{ ist ganz} & \Lra & B|A \text{ ist algebraisch}
	\end{eqnarray*}
\end{anm}
\begin{fo}\label{15.3}
	Es gilt:
	\begin{enumerate}[label= \alph*)]
		\item $B|A$ endlich $\Ra B|A$ ganz
		\item $C|B|A$ Ringerweiterungen, $c\in C$ ganz über $A$. Dann ist $c$ gnaz über $B$.
	\end{enumerate}
\end{fo}
\begin{proof}
	$b)$ Sei $b\in B$. Dann folgt die Behauptung aus \ref{15.2} $iii)\Ra i)$ mit $Z=B$.\\
	$a)$ aus \ref{15.2} $i)\Ra ii)$
\end{proof}
\begin{bsp}
	$\Z[i]|\Z$ ist ganz, denn $\Z[i]|\Z$ ist endlich, da $1,i$ ein Erzeugendensystem von $\Z[i]$ als $\Z$-Modul bilden.
\end{bsp}
\begin{sa}\label{15.5}
	Seien $C|B|A$ Ringerweiterungen. Dann sind äquivalent:
	\begin{enumerate}[label= \roman*)]
		\item $B|A$ ist ganz und $C|B$ ist ganz
		\item $C|A$ ist ganz
	\end{enumerate}
\end{sa}
\begin{proof}
	$i)\Ra ii)$ Sei $c\in C$. Dann existieren $b_0, \ldots, b_{n-1}\in B $ mit \begin{equation}\tag{$\ast$}
	c^n + b_{n-}c^{n-1} + \ldots + b_1 c+ b_0 =0
	\end{equation}
	Dann ist $A[b_0, \ldots, b_{n-1}, c]|A$ endlich (also ist $c$ ganz über $A$ nach \ref{15.2} mit $Z = A[b_0, \ldots, b_{n-1}, c]$), denn:
	\begin{itemize}
		\item $A[b_0]|A$ ist endlich wegen $b_0\in B$ und $B|A$ ist ganz.
		\item $(A[b_0])[b_1]|A[b_0]$ ist endlich, wegen $b_1\in B$, also ist $b_1$ ganz über $A$. Somit ist $b_1$ ganz über $A[b_0]$, usw. Dann ist $(A[b_0, \ldots, b_{n-1}])[c]|A[b_0, \ldots, b_{n-1}]$ endlich, da $c$ gegenüber $A[b_0, \ldots, b_{n-1}]$ ganz ist wegen $(\ast)$.
	\end{itemize}
	$ii)\Ra i)$ Sei $C|A$ ganz. Dann ist offensichtlich $B|A$ ganz und $C|B$ ist ganz nach \ref{15.3} $b)$.
\end{proof}
\begin{bem}
	Sei $B|A$ eine ganze Ringerweiterung, $\b\subseteq B$ ein Ideal. Dann ist $\QR{B}{\b} |\QR{A}{\b \cap A}$ eine ganze Ringerweiterung. 
\end{bem}
\begin{proof}
	Wir haben eine natürliche Inklusion $\QR{A}{\b \cap A} \hookrightarrow \QR{B}{\b}$. Sei $\bar b\in \QR{B}{\b}$. Da $b$ ganz über $A$ ist, existieren $a_{n-1}, \ldots, a_0\in A$ mit $b^n + \ldots + a_1 b + a_0 =0$, d.h. 
	$$\bar b + \ldots + \bar a_1 \bar b + \bar a_0 =\bar 0$$
	Damit ist $\bar b$ ganz über $\QR{A}{\b \cap A}$.
\end{proof}
\begin{bem}
	Sei $B|A$ eine ganze Ringerweiterung, $S\subseteq A$ ein Untermonois bezüglich "'$\cdot$"'. Dann ist $S^{-1} B |S^{-1} A$ eine ganze Ringerweiterung.
\end{bem}
\begin{proof}
	Wir haben eine natürliche Inklusion $S^{-1}A \hookrightarrow S^{-1}B$. Sei $b\in B, \, s\in S$. Da $B|A$ ganz ist, existieren $a_{n-1}, \ldots, a_0\in A$ mit $b^n + \ldots + a_0 =0$. Also ist 
	$$\left(\frac{b}{s}\right)^n + \frac{a_{n-1}}{s} \left(\frac{b}{s}\right)^{n-1} + \ldots + \frac{a_1}{s^{n-1}}\left(\frac{b}{s}\right)+ \frac{a_0}{s^n} =0$$
	also ist $\frac{b}{s}$ ganz über $S^{-1}A$.
\end{proof}
\begin{bem+df}
	Sei $B|A$ eine Ringerweiterung. Dann gilt:
	$$\bar A^B:= \{b\in B \ | \ b\text{ ist ganz über } A\}$$
	ist ein Unterring von $B$ mit $A\subseteq \bar A^B$, der \define{ganze Abschluss\index{ganzer Abschluss einer Ringerweiterung}}. $A$ heißt \define{ganzabgeschlossen in $B$ \index{ganzabgeschlossene Ringerweiterung}} $\defi \bar A^B =A$. $\bar A^B|A$ ist eine ganze Ringerweiterung und $\bar A^B$ ist ganzabgeschlossen in $B$. 
\end{bem+df}
\begin{proof}
	Seien $b_1, b_2\in \bar A^B$. Setze $Z:= A[b_1,b_2]$. Es ist $A[b_1]|A$ endlich, da $b_1$ ganz über $A$ ist. Da $b_2$ ganz über $A$ ist, ist $b_2$auch ganz über $A[b_1]$ nach \ref{15.3}. Dann ist $Z= (A[b_1])[b_2]|A[b_1]$ endlich und $Z|A$ ist endlich. Es sind $b_1-b_2, \, b_1\cdot b_2\in Z$ und nach \ref{15.2} sind $b_1-b_2, \, b_1\cdot b_2$ ganz über $A$. Außerdem sind $0,1\in \bar A^B$. Somit ist $\bar A^B$ ein Unterring von $B$. $\bar A^B|A$ ist ganz nach Konstruktion und $\bar A^B$ ist ganzabgeschlossen in $B$, denn:
	$$\overline{(\bar A^B)}^B = \{b\in B \ | \ b\text{ ist ganz über } \bar A^B\} = \{b\in B \ | \ b\text{ ist ganz über }A \} = \bar A^B$$
\end{proof}
\begin{bem}
	Sei $B|A$ eine Ringerweiterung, $S\subseteq A$ ein Untermonoid bezüglich "'$\cdot$"'. Dann gilt: $$\overline{S^{-1}A}^{S^{-1}B} = S^{-1}( \bar A^B)$$ Insbesondere gilt: Ist $A$ ganzabgeschlossen in $B$, dann ist $S^{-1}A$ ganzabgeschlossen in $S^{-1}B$.
\end{bem}
\begin{proof}
	"'$\subseteq$"' Die Erweiterung $S^{-1}(\bar A^B)|S^{-1}A$ ist ganz, da $\bar A^B|A$ ganz ist und nach \ref{15.7} ist $S^{-1}(\bar A^B) \subseteq \overline{S^{-1}A}^{S^{-1}B}$.\\
	"'$\supseteq$"' Sei $b\in B$, $s\in S$ mit $\frac{b}{s}$ ganz über $S^{-1}A$. Dann existieren $a_{n-1}, \ldots, a_0\in A, \, s_{n-1}, \ldots, s_0\in S$ mit
	$$\left(\frac{b}{s}\right)^n + \frac{a_{n-1}}{s_{n-1}}\left( \frac{b}{s}\right)^{n-1} + \ldots + \frac{a_1}{s_1} \frac{b}{s} + \frac{a_0}{s_0} =0$$
	Setze $t:= s_0 \cdots s_{n-1}\in S$. Mutlipliziere die Gleichung mit $(st)^n$:
	$$(bt)^n + \frac{a_{n-1}st}{s_{n-1}}(bt)^{n-1}+ \ldots =0$$
	d.h. wir erhalten eine Ganzheitsgleichung für $bt$ über $A$. Dann ist $bt\in \bar A^B$, d.h. $\frac{b}{s} = \frac{bt}{st} \in S^{-1}( \bar A^B)$
\end{proof}
\begin{df}
	Sei $A$ nullteilerfrei. Der \define{ganze Abschluss\index{ganzer Abschluss eines Rings}} von $A$ ist der ganze Abschluss von $A$ in $\Quot(A)$. $A$ heißt \define{normal (ganzabgeschlossen)\index{normaler Ring}} $\defi A$ stimmt mit seinem ganzen Abschluss überein.
\end{df}
\begin{bem}
	Sei $A$ faktoriell. Dann ist $A$ normal.
\end{bem}
\begin{proof}
	Sei $b\in \Quot(A)$ ganz über $A$. Es ist zu zeigen, dass $b\in A$ liegt. Es existieren $a_{n-1}, \ldots, a_0\in A$ mit 
	$$b^n + a_{n-1} b^{n-1} + \ldots + a_1 b + a_0 =0$$
	Sei $b=\frac{p}{q}$ mit $p,q\in A$ teilerfremd. Dann ist
	$$\frac{p^n}{q^n} + a_{n-1} \frac{p^{n-1}}{q^{n-1}} + \ldots + a_1 \frac{p}{q} + a_0=0$$
	Multiplikation mit $q^n$ liefert
	$$p^n = a_{n-1}qp^{n-1} - \ldots - a_1 q^{n-1} p - a_0 q^n$$
	Angenommen $q\notin A^*$. Da $A$ faktoriell, existieren Primteiler $\pi$ von $a$, sodass $\pi |p^n$, also $\pi|p$ Widerspruch zu $p,q$ teilerfremd! Alst liegt $q\in A^*$, d.h. $b\in A$.
\end{proof}
\begin{bsp}
	Es ist $\bar \Z^{\Q(i)} = \Z[i]$, denn: $\Z[i]|\Z$ ist ganz, $\Z[i]$ ist normal, da faktoriell.
\end{bsp}